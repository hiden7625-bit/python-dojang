<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Python ì½”ë”© ë„ì¥</title>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Python ë„ì¥">
<meta name="mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#0a0e1a">
<link rel="icon" id="favicon" type="image/png">
<link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;500;600&family=Noto+Sans+KR:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<style>
*{box-sizing:border-box;margin:0;padding:0;-webkit-tap-highlight-color:transparent}
body{min-height:100vh;min-height:100dvh;background:linear-gradient(160deg,#0a0e1a 0%,#101829 40%,#0d1520 100%);font-family:'Noto Sans KR','Apple SD Gothic Neo',-apple-system,sans-serif;color:#c8d6e5;overflow-x:hidden;-webkit-font-smoothing:antialiased}
@supports(padding-top:env(safe-area-inset-top)){body{padding-top:env(safe-area-inset-top);padding-bottom:env(safe-area-inset-bottom)}}
.container{max-width:1160px;margin:0 auto;padding:28px 24px 60px}
.header{display:flex;align-items:center;gap:14px;margin-bottom:8px}
.header h1{font-size:26px;font-weight:800;letter-spacing:-.5px;background:linear-gradient(135deg,#FFD43B 0%,#3776AB 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.subtitle{font-size:13px;color:#5a6a80;margin:0 0 24px 42px}
.progress-bar{height:4px;border-radius:2px;background:#1a2236;margin-bottom:28px;overflow:hidden}
.progress-fill{height:100%;border-radius:2px;transition:width .6s cubic-bezier(.4,0,.2,1)}

/* === COURSE SELECT SCREEN === */
.course-select{display:flex;flex-direction:column;align-items:center;padding:40px 0}
.course-select h2{font-size:28px;font-weight:800;color:#e8eef5;margin-bottom:8px;text-align:center}
.course-select p{font-size:14px;color:#6a7d94;margin-bottom:40px;text-align:center}
.course-cards{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;width:100%;max-width:900px}
.course-card{border-radius:20px;padding:32px 24px;cursor:pointer;transition:all .3s ease;position:relative;overflow:hidden;text-align:center}
.course-card:hover{transform:translateY(-4px)}
.course-card:active{transform:scale(.97)}
.course-card .emoji{font-size:48px;margin-bottom:16px;display:block}
.course-card h3{font-size:20px;font-weight:700;margin-bottom:6px}
.course-card .level-desc{font-size:12px;line-height:1.6;margin-bottom:16px;min-height:60px}
.course-card .topics{display:flex;flex-wrap:wrap;gap:6px;justify-content:center}
.course-card .topic-tag{padding:4px 10px;border-radius:12px;font-size:11px;font-weight:500}
.course-card .start-label{margin-top:20px;padding:10px 24px;border-radius:10px;font-size:13px;font-weight:700;display:inline-block}

.card-beginner{background:linear-gradient(145deg,rgba(46,160,67,.12),rgba(46,160,67,.04));border:1px solid rgba(46,160,67,.2)}
.card-beginner:hover{box-shadow:0 8px 32px rgba(46,160,67,.2)}
.card-beginner h3{color:#2ea043}.card-beginner .level-desc{color:#6abf7b}
.card-beginner .topic-tag{background:rgba(46,160,67,.12);color:#4ecc6a}
.card-beginner .start-label{background:rgba(46,160,67,.15);color:#2ea043}

.card-intermediate{background:linear-gradient(145deg,rgba(232,163,23,.12),rgba(232,163,23,.04));border:1px solid rgba(232,163,23,.2)}
.card-intermediate:hover{box-shadow:0 8px 32px rgba(232,163,23,.2)}
.card-intermediate h3{color:#e8a317}.card-intermediate .level-desc{color:#d4b96a}
.card-intermediate .topic-tag{background:rgba(232,163,23,.12);color:#f0bc42}
.card-intermediate .start-label{background:rgba(232,163,23,.15);color:#e8a317}

.card-advanced{background:linear-gradient(145deg,rgba(200,60,60,.12),rgba(200,60,60,.04));border:1px solid rgba(200,60,60,.2)}
.card-advanced:hover{box-shadow:0 8px 32px rgba(200,60,60,.2)}
.card-advanced h3{color:#e05555}.card-advanced .level-desc{color:#d48a8a}
.card-advanced .topic-tag{background:rgba(200,60,60,.12);color:#f07070}
.card-advanced .start-label{background:rgba(200,60,60,.15);color:#e05555}

/* Course badge in practice view */
.course-badge{display:inline-flex;align-items:center;gap:6px;padding:6px 14px;border-radius:20px;font-size:12px;font-weight:700;margin-bottom:16px;cursor:pointer;transition:.2s}
.course-badge:hover{filter:brightness(1.2)}
.badge-beginner{background:rgba(46,160,67,.12);color:#4ecc6a;border:1px solid rgba(46,160,67,.2)}
.badge-intermediate{background:rgba(232,163,23,.12);color:#f0bc42;border:1px solid rgba(232,163,23,.2)}
.badge-advanced{background:rgba(200,60,60,.12);color:#f07070;border:1px solid rgba(200,60,60,.2)}

.stage-tabs{display:flex;gap:8px;margin-bottom:28px;flex-wrap:wrap}
.stage-tab{padding:10px 18px;border:none;border-radius:10px;cursor:pointer;font-family:'Noto Sans KR',sans-serif;font-size:13px;font-weight:600;transition:all .25s ease;background:rgba(255,255,255,.04);color:#5a6a80}
.stage-tab.active{color:#fff;box-shadow:0 4px 20px rgba(55,118,171,.3);transform:translateY(-1px)}
.stage-tab.done{background:rgba(55,118,171,.15);color:#5ba3d9}
.tab-beginner.active{background:linear-gradient(135deg,#2ea043,#238636)}
.tab-intermediate.active{background:linear-gradient(135deg,#e8a317,#d4940f)}
.tab-advanced.active{background:linear-gradient(135deg,#e05555,#c04040)}
.main-grid{display:grid;grid-template-columns:1fr 1fr;gap:24px;align-items:start}
.card{background:rgba(255,255,255,.03);border-radius:16px;border:1px solid rgba(255,255,255,.06);padding:28px;margin-bottom:20px}
.stage-label{font-size:11px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;font-family:'Fira Code',monospace}
.label-beginner{color:#2ea043}.label-intermediate{color:#e8a317}.label-advanced{color:#e05555}
.stage-difficulty{font-size:14px;letter-spacing:2px}
.stage-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}
.stage-title{font-size:22px;font-weight:700;margin-bottom:10px;color:#e8eef5}
.stage-desc{font-size:14px;color:#7a8da3;line-height:1.6;margin-bottom:20px}
.task-box{background:rgba(55,118,171,.08);border-radius:12px;border:1px solid rgba(55,118,171,.15);padding:20px}
.task-label{font-size:11px;font-weight:700;color:#FFD43B;letter-spacing:1px;margin-bottom:10px}
.task-text{font-size:13px;color:#b0c4de;line-height:1.8;white-space:pre-wrap;font-family:'Noto Sans KR',sans-serif}
.accordion-btn{width:100%;padding:14px 20px;border-radius:12px;cursor:pointer;text-align:left;display:flex;justify-content:space-between;align-items:center;font-size:13px;font-weight:600;font-family:'Noto Sans KR',sans-serif;transition:all .2s ease;border:none;outline:none}
.accordion-btn:hover{filter:brightness(1.15)}.accordion-btn:active{transform:scale(.98)}
.concept-btn{background:rgba(255,212,59,.06);border:1px solid rgba(255,212,59,.12)!important;color:#FFD43B;margin-bottom:12px}
.hint-btn{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.06)!important;color:#8a9ab5;margin-bottom:8px}
.hint-btn.answer-btn{background:rgba(120,200,120,.06);border:1px solid rgba(120,200,120,.15)!important;color:#78c878}
.arrow{transition:transform .3s;font-size:12px}.arrow.open{transform:rotate(180deg)}
.accordion-content{overflow:hidden;max-height:0;opacity:0;transition:max-height .35s ease,opacity .25s ease}
.accordion-content.open{max-height:2000px;opacity:1}
.concept-content{background:rgba(255,212,59,.04);border-radius:12px;border:1px solid rgba(255,212,59,.08);padding:16px 20px;margin-bottom:12px}
.concept-list{display:flex;flex-direction:column;gap:12px}
.concept-item{background:rgba(0,0,0,.2);border-radius:12px;border:1px solid rgba(255,212,59,.08);overflow:hidden}
.concept-item-header{padding:10px 16px;display:flex;align-items:center;gap:10px;background:rgba(255,212,59,.05)}
.concept-item-name{font-size:13px;font-weight:700;color:#FFD43B;font-family:'Fira Code',monospace}
.concept-item-desc{padding:10px 16px 6px;font-size:12px;color:#9ab0c8;line-height:1.6}
.concept-item-example{margin:6px 12px 12px;padding:10px 14px;background:rgba(0,0,0,.25);border-radius:8px;border:1px solid rgba(255,255,255,.04);font-family:'Fira Code',monospace;font-size:12px;color:#a8e6a8;line-height:1.7;white-space:pre-wrap;word-break:break-all}
.hint-content{margin-top:4px;margin-bottom:8px;padding:16px 20px;background:rgba(0,0,0,.25);border-radius:10px;border:1px solid rgba(255,255,255,.04)}
.hint-content pre{font-size:13px;color:#a8c4e0;line-height:1.8;margin:0;font-family:'Fira Code',monospace;white-space:pre-wrap;word-break:break-all}
.editor-wrap{background:#0d1117;border-radius:16px;border:1px solid rgba(255,255,255,.06);overflow:hidden;box-shadow:0 8px 40px rgba(0,0,0,.3)}
.editor-header{padding:14px 20px;background:rgba(255,255,255,.03);border-bottom:1px solid rgba(255,255,255,.06);display:flex;justify-content:space-between;align-items:center}
.traffic-lights{display:flex;gap:8px;align-items:center}
.dot{width:12px;height:12px;border-radius:50%}.dot-red{background:#ff5f57}.dot-yellow{background:#febc2e}.dot-green{background:#28c840}
.filename{margin-left:12px;font-size:12px;color:#4a5568;font-family:'Fira Code',monospace}
.reset-btn{padding:5px 12px;background:rgba(255,255,255,.06);border:none;border-radius:6px;color:#7a8da3;font-size:11px;cursor:pointer;font-family:'Fira Code',monospace;transition:.2s}
.reset-btn:hover{background:rgba(255,255,255,.1)}
.editor-body{position:relative}
.line-numbers{position:absolute;top:0;left:0;width:44px;padding:20px 0;text-align:right;font-family:'Fira Code',monospace;font-size:13px;color:#2d3748;line-height:22px;user-select:none;border-right:1px solid rgba(255,255,255,.04);pointer-events:none;z-index:1}
.line-numbers div{padding-right:12px}
.code-textarea{width:100%;min-height:240px;padding:20px 20px 20px 56px;background:transparent;border:none;outline:none;resize:vertical;font-family:'Fira Code',monospace;font-size:13px;line-height:22px;color:#e2e8f0;caret-color:#FFD43B}
.code-textarea::selection{background:rgba(55,118,171,.4)}
.editor-footer{padding:14px 20px;border-top:1px solid rgba(255,255,255,.04);display:flex;justify-content:space-between;align-items:center;font-size:11px;color:#3d4f65;font-family:'Fira Code',monospace}
.btn-run{width:100%;padding:14px;border:none;border-radius:12px;background:linear-gradient(135deg,#e8a317,#d4940f);color:#fff;font-size:15px;font-weight:700;cursor:pointer;font-family:'Noto Sans KR',sans-serif;box-shadow:0 4px 16px rgba(232,163,23,.3);transition:all .2s ease;margin-top:12px;display:flex;align-items:center;justify-content:center;gap:8px}
.btn-run:hover{filter:brightness(1.1)}.btn-run:active{transform:scale(.97)}
.output-wrap{margin-top:12px;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,.06);animation:slideDown .3s ease}
.output-header{padding:10px 16px;display:flex;justify-content:space-between;align-items:center;font-size:12px;font-weight:700;font-family:'Fira Code',monospace}
.output-header.success{background:rgba(40,200,64,.1);color:#28c840;border-bottom:1px solid rgba(40,200,64,.15)}
.output-header.error{background:rgba(255,95,87,.1);color:#ff5f57;border-bottom:1px solid rgba(255,95,87,.15)}
.output-header .status-dot{width:8px;height:8px;border-radius:50%;display:inline-block;margin-right:8px}
.output-header.success .status-dot{background:#28c840;box-shadow:0 0 8px rgba(40,200,64,.5)}
.output-header.error .status-dot{background:#ff5f57;box-shadow:0 0 8px rgba(255,95,87,.5)}
.output-body{padding:14px 16px;background:rgba(0,0,0,.35);font-family:'Fira Code',monospace;font-size:13px;line-height:1.7;white-space:pre-wrap;word-break:break-all;max-height:200px;overflow-y:auto}
.output-body.success-text{color:#a8e6a8}.output-body.error-text{color:#ffb0ab}
.output-time{font-size:10px;opacity:.6}
.actions{display:flex;gap:10px;margin-top:10px}
.btn-view-answer{flex:1;padding:14px;border:1px solid rgba(255,255,255,.08);border-radius:12px;background:rgba(255,255,255,.03);color:#8a9ab5;font-size:14px;font-weight:600;cursor:pointer;font-family:'Noto Sans KR',sans-serif;transition:all .2s ease}
.btn-complete{flex:1;padding:14px;border:none;border-radius:12px;background:linear-gradient(135deg,#3776AB,#2a5f8f);color:#fff;font-size:14px;font-weight:700;cursor:pointer;font-family:'Noto Sans KR',sans-serif;box-shadow:0 4px 16px rgba(55,118,171,.25);transition:all .2s ease}
.btn-complete.done{background:linear-gradient(135deg,#28a745,#20863a)}
.btn-complete:hover,.btn-view-answer:hover{filter:brightness(1.1)}
.answer-panel{margin-top:12px;border-radius:12px;overflow:hidden;border:1px solid rgba(120,200,120,.15);animation:slideDown .3s ease}
.answer-header{padding:12px 20px;background:rgba(120,200,120,.08);font-size:12px;font-weight:700;color:#78c878}
.answer-code{margin:0;padding:16px 20px;background:rgba(0,0,0,.3);font-family:'Fira Code',monospace;font-size:13px;color:#a8c4e0;line-height:1.8;white-space:pre-wrap;word-break:break-all}
.copy-to-editor{width:100%;padding:12px;background:rgba(120,200,120,.06);border:none;border-top:1px solid rgba(120,200,120,.1);color:#78c878;font-size:13px;font-weight:600;cursor:pointer;font-family:'Noto Sans KR',sans-serif}
.nav-btns{display:flex;gap:10px;margin-top:16px}
.nav-btn{flex:1;padding:12px;border:1px solid rgba(255,255,255,.06);border-radius:10px;background:rgba(255,255,255,.02);color:#7a8da3;font-size:13px;font-weight:600;cursor:pointer;font-family:'Noto Sans KR',sans-serif;transition:.2s}
.nav-btn:disabled{color:#2d3748;cursor:default}
/* === AI CHAT PANEL === */
.btn-ask{flex:1;padding:14px;border:none;border-radius:12px;background:linear-gradient(135deg,#7c3aed,#5b21b6);color:#fff;font-size:14px;font-weight:700;cursor:pointer;font-family:'Noto Sans KR',sans-serif;box-shadow:0 4px 16px rgba(124,58,237,.3);transition:all .2s ease}
.btn-ask:hover{filter:brightness(1.15)}.btn-ask:active{transform:scale(.97)}
.chat-panel{margin-top:12px;border-radius:14px;overflow:hidden;border:1px solid rgba(124,58,237,.2);background:rgba(124,58,237,.04);animation:slideDown .3s ease}
.chat-header{padding:12px 16px;background:rgba(124,58,237,.1);display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(124,58,237,.15)}
.chat-header span{font-size:13px;font-weight:700;color:#a78bfa}
.chat-close{background:none;border:none;color:#7c6aaa;font-size:16px;cursor:pointer;padding:4px 8px}
.chat-messages{padding:12px 16px;max-height:280px;overflow-y:auto;display:flex;flex-direction:column;gap:10px}
.chat-msg{padding:10px 14px;border-radius:12px;font-size:13px;line-height:1.7;font-family:'Noto Sans KR',sans-serif;word-break:break-word;white-space:pre-wrap}
.chat-msg.user{background:rgba(124,58,237,.15);color:#d4bfff;align-self:flex-end;max-width:85%;border-bottom-right-radius:4px}
.chat-msg.ai{background:rgba(255,255,255,.05);color:#b0c4de;align-self:flex-start;max-width:90%;border-bottom-left-radius:4px}
.chat-msg.ai code{background:rgba(0,0,0,.3);padding:2px 6px;border-radius:4px;font-family:'Fira Code',monospace;font-size:12px;color:#a8e6a8}
.chat-msg.thinking{color:#7c6aaa;font-style:italic}
.chat-input-wrap{padding:10px 12px;border-top:1px solid rgba(124,58,237,.1);display:flex;gap:8px;align-items:center}
.chat-input{flex:1;padding:10px 14px;border:1px solid rgba(124,58,237,.2);border-radius:10px;background:rgba(0,0,0,.2);color:#d4bfff;font-size:13px;font-family:'Noto Sans KR',sans-serif;outline:none;resize:none;min-height:40px;max-height:80px}
.chat-input::placeholder{color:#5a4d7a}
.chat-input:focus{border-color:rgba(124,58,237,.4)}
.chat-send{padding:8px 16px;border:none;border-radius:10px;background:linear-gradient(135deg,#7c3aed,#5b21b6);color:#fff;font-size:13px;font-weight:700;cursor:pointer;font-family:'Noto Sans KR',sans-serif;transition:.2s;white-space:nowrap}
.chat-send:hover{filter:brightness(1.15)}.chat-send:active{transform:scale(.95)}
.chat-send:disabled{opacity:.5;pointer-events:none}
.btn-complete{flex:0 0 auto;padding:14px 18px;border:none;border-radius:12px;background:linear-gradient(135deg,#3776AB,#2a5f8f);color:#fff;font-size:13px;font-weight:700;cursor:pointer;font-family:'Noto Sans KR',sans-serif;transition:all .2s ease}
.btn-complete.done{background:linear-gradient(135deg,#28a745,#20863a)}

.celebration{position:fixed;inset:0;z-index:999;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.5);backdrop-filter:blur(4px);animation:fadeInOut 1.8s ease-in-out forwards}
.celebration span{font-size:80px;animation:popIn .5s cubic-bezier(.68,-.55,.27,1.55)}
@keyframes fadeInOut{0%{opacity:0}20%{opacity:1}80%{opacity:1}100%{opacity:0}}
@keyframes popIn{0%{transform:scale(0)}100%{transform:scale(1)}}
@keyframes slideDown{from{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}

@media(max-width:768px){
.container{padding:16px 14px 40px}.header h1{font-size:20px}.header svg{width:24px;height:24px}.subtitle{font-size:11px;margin:0 0 16px 38px}
.course-cards{grid-template-columns:1fr;max-width:400px}.course-card{padding:24px 20px}.course-select h2{font-size:22px}.course-select p{font-size:12px;margin-bottom:24px}
.stage-tabs{gap:6px;margin-bottom:16px;overflow-x:auto;flex-wrap:nowrap;padding-bottom:4px;-webkit-overflow-scrolling:touch;scrollbar-width:none}.stage-tabs::-webkit-scrollbar{display:none}.stage-tab{padding:8px 14px;font-size:12px;border-radius:8px;flex-shrink:0}
.main-grid{grid-template-columns:1fr;gap:16px}.card{padding:20px;margin-bottom:14px}.stage-title{font-size:18px}.task-box{padding:16px}.task-text{font-size:12px;line-height:1.7}
.accordion-btn{padding:12px 16px;font-size:12px}.hint-content pre{font-size:11px}
.editor-wrap{border-radius:14px}.code-textarea{min-height:180px;padding:16px 14px 16px 46px;font-size:12px;line-height:20px}.line-numbers{width:36px;font-size:11px;line-height:20px;padding:16px 0}.line-numbers div{padding-right:8px}.editor-footer{padding:10px 14px;font-size:10px}
.btn-run{padding:12px;font-size:14px;margin-top:10px}.output-body{font-size:12px;padding:12px 14px}
.actions{gap:8px;margin-top:10px}.btn-view-answer,.btn-complete{padding:12px;font-size:13px}.nav-btns{gap:8px;margin-top:12px}.nav-btn{padding:10px;font-size:12px}
.answer-code{padding:12px 16px;font-size:11px}.celebration span{font-size:60px}
.chat-panel{border-radius:12px}.chat-messages{max-height:220px;padding:10px 12px}.chat-msg{font-size:12px;padding:8px 12px}.chat-input{font-size:12px;padding:8px 12px}.chat-send{font-size:12px;padding:6px 12px}
}
@media(max-width:380px){.container{padding:12px 10px 32px}.header h1{font-size:17px}.stage-tab{padding:7px 10px;font-size:11px}.card{padding:14px}.stage-title{font-size:16px}.code-textarea{min-height:160px;font-size:11px}}
</style>
</head>
<body>
<div class="container">
<div class="celebration" id="celebration" style="display:none"><span>ğŸ‰</span></div>
<div class="header">
<svg width="28" height="28" viewBox="0 0 28 28" fill="none"><path d="M13.9 2C8.3 2 8.8 4.5 8.8 4.5V7.2h5.3v.8H6.4S2 7.4 2 13.1s3.8 5.5 3.8 5.5h2.3v-2.7s-.1-3.8 3.7-3.8h5.2s3.6.1 3.6-3.5V4.8S21.2 2 13.9 2zm-2.9 1.6c.5 0 1 .4 1 1s-.4 1-1 1c-.5 0-1-.4-1-1s.5-1 1-1z" fill="#3776AB"/><path d="M14.1 26c5.6 0 5.1-2.5 5.1-2.5v-2.7h-5.3v-.8h7.7S26 20.6 26 14.9s-3.8-5.5-3.8-5.5h-2.3v2.7s.1 3.8-3.7 3.8H11s-3.6-.1-3.6 3.5v3.8S6.8 26 14.1 26zm2.9-1.6c-.5 0-1-.4-1-1s.4-1 1-1 1 .4 1 1-.5 1-1 1z" fill="#FFD43B"/></svg>
<h1>Python ì½”ë”© ë„ì¥</h1>
</div>
<p class="subtitle">ë‹¨ê³„ë³„ë¡œ íŒŒì´ì¬ì„ ë§ˆìŠ¤í„°í•˜ì„¸ìš”</p>
<div id="mainContent"></div>
</div>

<script>
// ==================== ICON ====================
(function(){const c=document.createElement('canvas');c.width=180;c.height=180;const x=c.getContext('2d');const g=x.createLinearGradient(0,0,180,180);g.addColorStop(0,'#0f1729');g.addColorStop(1,'#162035');x.fillStyle=g;x.beginPath();x.roundRect(0,0,180,180,36);x.fill();x.fillStyle='#3776AB';x.beginPath();x.arc(72,68,32,0,Math.PI*2);x.fill();x.fillStyle='#FFD43B';x.beginPath();x.arc(108,112,32,0,Math.PI*2);x.fill();x.fillStyle='#fff';x.font='bold 48px sans-serif';x.textAlign='center';x.textBaseline='middle';x.fillText('Py',90,90);const d=c.toDataURL('image/png');document.getElementById('favicon').href=d;const a=document.createElement('link');a.rel='apple-touch-icon';a.href=d;document.head.appendChild(a)})();

// ==================== ALL COURSE DATA ====================
const COURSES = {
beginner: {
  name: 'ì´ˆê¸‰', emoji: 'ğŸŒ±', color: 'beginner',
  desc: 'í”„ë¡œê·¸ë˜ë°ì´ ì²˜ìŒì´ì‹  ë¶„',
  topics: ['ë³€ìˆ˜','ì¶œë ¥','ì¡°ê±´ë¬¸','ë°˜ë³µë¬¸','í•¨ìˆ˜'],
  stages: [
    {id:1,title:"ë³€ìˆ˜ì™€ ì¶œë ¥",difficulty:"â­",description:"ì´ë¦„ê³¼ ë‚˜ì´ë¥¼ ë³€ìˆ˜ì— ì €ì¥í•˜ê³  ì¶œë ¥í•´ë³´ì„¸ìš”.",
    task:'ë³€ìˆ˜ nameì— ìì‹ ì˜ ì´ë¦„(ë¬¸ìì—´), ageì— ë‚˜ì´(ìˆ«ì)ë¥¼ ì €ì¥í•˜ê³ ,\n"ì•ˆë…•í•˜ì„¸ìš”, ì €ëŠ” {ì´ë¦„}ì´ê³  {ë‚˜ì´}ì‚´ì…ë‹ˆë‹¤." í˜•íƒœë¡œ ì¶œë ¥í•˜ì„¸ìš”.',
    hints:[{label:"íŒíŠ¸ 1: ë³€ìˆ˜ ì„ ì–¸",detail:'ë¬¸ìì—´ì€ ë”°ì˜´í‘œë¡œ ê°ì‹¸ìš”.\nname = "í™ê¸¸ë™"\nage = 25'},{label:"íŒíŠ¸ 2: f-string",detail:'f-stringì„ ì‚¬ìš©í•˜ë©´ ë³€ìˆ˜ë¥¼ ì‰½ê²Œ ë„£ì„ ìˆ˜ ìˆì–´ìš”.\nprint(f"í…ìŠ¤íŠ¸ {ë³€ìˆ˜}")'},{label:"ğŸ’¡ ì •ë‹µ ë³´ê¸°",detail:'name = "í™ê¸¸ë™"\nage = 25\nprint(f"ì•ˆë…•í•˜ì„¸ìš”, ì €ëŠ” {name}ì´ê³  {age}ì‚´ì…ë‹ˆë‹¤.")'}],
    starterCode:'# ë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ê³  ì¶œë ¥í•´ë³´ì„¸ìš”\nname = \nage = \nprint()',
    sampleAnswer:'name = "í™ê¸¸ë™"\nage = 25\nprint(f"ì•ˆë…•í•˜ì„¸ìš”, ì €ëŠ” {name}ì´ê³  {age}ì‚´ì…ë‹ˆë‹¤.")',
    concepts:[{name:"ë³€ìˆ˜ ì„ ì–¸",desc:"ê°’ì„ ì €ì¥í•˜ëŠ” ì´ë¦„í‘œ. = ìœ¼ë¡œ ê°’ì„ ë„£ì–´ìš”.",example:'name = "ì² ìˆ˜"\nage = 25\nprice = 3.14'},{name:"ìë£Œí˜• (str, int)",desc:"ë¬¸ìì—´ì€ ë”°ì˜´í‘œ, ìˆ«ìëŠ” ê·¸ëƒ¥ ì“°ë©´ ë¼ìš”.",example:'str â†’ "ì•ˆë…•"  (ë¬¸ìì—´)\nint â†’ 42      (ì •ìˆ˜)\nfloat â†’ 3.14  (ì‹¤ìˆ˜)'},{name:"f-string",desc:"ë¬¸ìì—´ ì•ˆì— ë³€ìˆ˜ë¥¼ {ì¤‘ê´„í˜¸}ë¡œ ë„£ëŠ” ë°©ë²•.",example:'name = "ì˜í¬"\nf"ì´ë¦„ì€ {name}ì…ë‹ˆë‹¤"\nâ†’ "ì´ë¦„ì€ ì˜í¬ì…ë‹ˆë‹¤"'},{name:"print()",desc:"ê´„í˜¸ ì•ˆì˜ ê°’ì„ í™”ë©´ì— ì¶œë ¥í•˜ëŠ” í•¨ìˆ˜.",example:'print("ì•ˆë…•")     â†’ ì•ˆë…•\nprint(1 + 2)     â†’ 3\nprint(f"{name}") â†’ ì˜í¬'}]},

    {id:2,title:"ì¡°ê±´ë¬¸ (if/else)",difficulty:"â­â­",description:"ì ìˆ˜ì— ë”°ë¼ ë“±ê¸‰ì„ ì¶œë ¥í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ë§Œë“œì„¸ìš”.",
    task:"ë³€ìˆ˜ scoreì— ì ìˆ˜(0~100)ë¥¼ ì €ì¥í•˜ê³ ,\n90 ì´ìƒì´ë©´ 'A', 80 ì´ìƒì´ë©´ 'B', 70 ì´ìƒì´ë©´ 'C', ê·¸ ì™¸ëŠ” 'F'ë¥¼ ì¶œë ¥í•˜ì„¸ìš”.",
    hints:[{label:"íŒíŠ¸ 1: if êµ¬ì¡°",detail:"if ì¡°ê±´:\n    ì‹¤í–‰ë¬¸\nelif ë‹¤ë¥¸ì¡°ê±´:\n    ì‹¤í–‰ë¬¸\nelse:\n    ì‹¤í–‰ë¬¸"},{label:"íŒíŠ¸ 2: ë¹„êµ ì—°ì‚°ì",detail:">= ëŠ” 'ì´ìƒ'ì„ ì˜ë¯¸í•´ìš”.\ní° ìˆ«ìë¶€í„° ë¹„êµí•˜ë©´ í¸í•´ìš”!"},{label:"ğŸ’¡ ì •ë‹µ ë³´ê¸°",detail:'score = 85\nif score >= 90:\n    print("A")\nelif score >= 80:\n    print("B")\nelif score >= 70:\n    print("C")\nelse:\n    print("F")'}],
    starterCode:"score = 85\n# ì¡°ê±´ë¬¸ì„ ì‘ì„±í•´ë³´ì„¸ìš”\n",
    sampleAnswer:'score = 85\nif score >= 90:\n    print("A")\nelif score >= 80:\n    print("B")\nelif score >= 70:\n    print("C")\nelse:\n    print("F")',
    concepts:[{name:"if / elif / else",desc:"ì¡°ê±´ì— ë”°ë¼ ë‹¤ë¥¸ ì½”ë“œë¥¼ ì‹¤í–‰í•˜ëŠ” êµ¬ë¬¸.",example:'if x > 0:\n    print("ì–‘ìˆ˜")\nelif x == 0:\n    print("ì˜")\nelse:\n    print("ìŒìˆ˜")'},{name:"ë¹„êµ ì—°ì‚°ì (>=)",desc:"ë‘ ê°’ì„ ë¹„êµí•˜ì—¬ True/Falseë¥¼ ë°˜í™˜í•´ìš”.",example:'==  ê°™ë‹¤     !=  ë‹¤ë¥´ë‹¤\n>   í¬ë‹¤     <   ì‘ë‹¤\n>=  ì´ìƒ     <=  ì´í•˜'},{name:"ë“¤ì—¬ì“°ê¸°",desc:"if ì•„ë˜ ì‹¤í–‰ë¬¸ì€ ë°˜ë“œì‹œ ìŠ¤í˜ì´ìŠ¤ 4ì¹¸ ë“¤ì—¬ì“°ê¸°.",example:'if True:\n    print("ì—¬ê¸°ëŠ” ë“¤ì—¬ì“°ê¸°")\nprint("ì—¬ê¸°ëŠ” ë°”ê¹¥")'},{name:"ì¡°ê±´ ìˆœì„œ",desc:"í° ë²”ìœ„ë¶€í„° ë¹„êµí•´ì•¼ ì •í™•í•œ ë¶„ë¥˜ê°€ ë¼ìš”.",example:'# âœ… ì˜¬ë°”ë¥¸ ìˆœì„œ\nif score >= 90: ...\nelif score >= 80: ...\n# âŒ ì˜ëª»ëœ ìˆœì„œ\nif score >= 70: ...  # 80ë„ ì—¬ê¸° ê±¸ë¦¼'}]},

    {id:3,title:"ë°˜ë³µë¬¸ (for)",difficulty:"â­â­â­",description:"1ë¶€í„° 10ê¹Œì§€ì˜ ìˆ«ì ì¤‘ ì§ìˆ˜ë§Œ ì¶œë ¥í•˜ì„¸ìš”.",
    task:"for ë°˜ë³µë¬¸ê³¼ range()ë¥¼ ì‚¬ìš©í•´ì„œ\n1ë¶€í„° 10ê¹Œì§€ ìˆ«ì ì¤‘ ì§ìˆ˜ë§Œ ì¶œë ¥í•˜ì„¸ìš”.\nì¶œë ¥ ì˜ˆ: 2 4 6 8 10",
    hints:[{label:"íŒíŠ¸ 1: range()",detail:"range(1, 11)ì€ 1ë¶€í„° 10ê¹Œì§€\nìˆ«ìë¥¼ ë§Œë“¤ì–´ì¤˜ìš”."},{label:"íŒíŠ¸ 2: ì§ìˆ˜ íŒë³„",detail:"ìˆ«ì % 2 == 0 ì´ë©´ ì§ìˆ˜ì˜ˆìš”."},{label:"ğŸ’¡ ì •ë‹µ ë³´ê¸°",detail:"for i in range(1, 11):\n    if i % 2 == 0:\n        print(i)"}],
    starterCode:"# for ë°˜ë³µë¬¸ìœ¼ë¡œ ì§ìˆ˜ë¥¼ ì¶œë ¥í•˜ì„¸ìš”\n",
    sampleAnswer:"for i in range(1, 11):\n    if i % 2 == 0:\n        print(i)",
    concepts:[{name:"for ë°˜ë³µë¬¸",desc:"ë¦¬ìŠ¤íŠ¸ë‚˜ ë²”ìœ„ì˜ ê°’ì„ í•˜ë‚˜ì”© êº¼ë‚´ë©° ë°˜ë³µ ì‹¤í–‰.",example:'for fruit in ["ì‚¬ê³¼","ë°°"]:\n    print(fruit)\nâ†’ ì‚¬ê³¼\nâ†’ ë°°'},{name:"range()",desc:"ì—°ì†ëœ ìˆ«ìë¥¼ ë§Œë“¤ì–´ì£¼ëŠ” í•¨ìˆ˜.",example:'range(5)      â†’ 0,1,2,3,4\nrange(1, 6)   â†’ 1,2,3,4,5\nrange(0,10,2) â†’ 0,2,4,6,8'},{name:"ë‚˜ë¨¸ì§€ ì—°ì‚°ì (%)",desc:"ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ë¥¼ êµ¬í•˜ëŠ” ì—°ì‚°ì.",example:'10 % 3 â†’ 1  (ë‚˜ë¨¸ì§€ 1)\n8 % 2  â†’ 0  (ì§ìˆ˜!)\n7 % 2  â†’ 1  (í™€ìˆ˜!)'},{name:"ì¡°ê±´ í•„í„°ë§",desc:"for ì•ˆì—ì„œ ifë¡œ ì›í•˜ëŠ” ê°’ë§Œ ê³¨ë¼ë‚´ê¸°.",example:'for i in range(1, 11):\n    if i % 2 == 0:\n        print(i)  # ì§ìˆ˜ë§Œ'}]},

    {id:4,title:"ë¦¬ìŠ¤íŠ¸ì™€ í•¨ìˆ˜",difficulty:"â­â­â­â­",description:"ë¦¬ìŠ¤íŠ¸ì—ì„œ ìµœëŒ€ê°’ì„ ì°¾ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“œì„¸ìš”.",
    task:'í•¨ìˆ˜ find_max(numbers)ë¥¼ ë§Œë“¤ì–´ì„œ\në¦¬ìŠ¤íŠ¸ì—ì„œ ê°€ì¥ í° ìˆ˜ë¥¼ ë°˜í™˜í•˜ì„¸ìš”.\n(ë‚´ì¥í•¨ìˆ˜ max() ì‚¬ìš© ê¸ˆì§€!)\n\ní…ŒìŠ¤íŠ¸: find_max([3, 7, 2, 9, 5]) â†’ 9',
    hints:[{label:"íŒíŠ¸ 1: í•¨ìˆ˜ ì„ ì–¸",detail:"def find_max(numbers):\n    # ì½”ë“œ ì‘ì„±\n    return ê²°ê³¼"},{label:"íŒíŠ¸ 2: ì•Œê³ ë¦¬ì¦˜",detail:"ì²« ë²ˆì§¸ ê°’ì„ ìµœëŒ€ê°’ìœ¼ë¡œ ë†“ê³ ,\ní•˜ë‚˜ì”© ë¹„êµí•˜ë©° ë” í° ê°’ì´ë©´ êµì²´"},{label:"ğŸ’¡ ì •ë‹µ ë³´ê¸°",detail:"def find_max(numbers):\n    max_val = numbers[0]\n    for num in numbers:\n        if num > max_val:\n            max_val = num\n    return max_val\n\nprint(find_max([3, 7, 2, 9, 5]))"}],
    starterCode:"def find_max(numbers):\n    # ìµœëŒ€ê°’ì„ ì°¾ì•„ ë°˜í™˜í•˜ì„¸ìš”\n    \n    return\n\nprint(find_max([3, 7, 2, 9, 5]))",
    sampleAnswer:"def find_max(numbers):\n    max_val = numbers[0]\n    for num in numbers:\n        if num > max_val:\n            max_val = num\n    return max_val\n\nprint(find_max([3, 7, 2, 9, 5]))",
    concepts:[{name:"def í•¨ìˆ˜ ì •ì˜",desc:"ì½”ë“œë¥¼ ë¬¶ì–´ì„œ ì´ë¦„ì„ ë¶™ì—¬ ì¬ì‚¬ìš©í•˜ëŠ” ë°©ë²•.",example:'def greet(name):\n    print(f"ì•ˆë…• {name}!")\n\ngreet("ì² ìˆ˜") â†’ ì•ˆë…• ì² ìˆ˜!'},{name:"return",desc:"í•¨ìˆ˜ê°€ ê²°ê³¼ ê°’ì„ ëŒë ¤ì£¼ëŠ” ëª…ë ¹ì–´.",example:'def add(a, b):\n    return a + b\n\nresult = add(3, 5)  # 8'},{name:"ë¦¬ìŠ¤íŠ¸ ì¸ë±ì‹±",desc:"ë¦¬ìŠ¤íŠ¸ì—ì„œ ìˆœì„œ(ë²ˆí˜¸)ë¡œ ê°’ì„ êº¼ë‚´ìš”. 0ë¶€í„° ì‹œì‘!",example:'fruits = ["ì‚¬ê³¼","ë°°","í¬ë„"]\nfruits[0] â†’ "ì‚¬ê³¼"\nfruits[2] â†’ "í¬ë„"\nfruits[-1] â†’ "í¬ë„" (ë’¤ì—ì„œ ì²«ë²ˆì§¸)'},{name:"ë°˜ë³µ ë¹„êµ",desc:"ê°’ë“¤ì„ í•˜ë‚˜ì”© ë¹„êµí•˜ë©° ìµœëŒ€/ìµœì†Œë¥¼ ì°¾ëŠ” ë°©ë²•.",example:'max_val = nums[0]\nfor num in nums:\n    if num > max_val:\n        max_val = num'}]},

    {id:5,title:"ë”•ì…”ë„ˆë¦¬ í™œìš©",difficulty:"â­â­â­â­â­",description:"í•™ìƒë“¤ì˜ í‰ê·  ì ìˆ˜ë¥¼ ê³„ì‚°í•˜ì„¸ìš”.",
    task:'ë”•ì…”ë„ˆë¦¬ì— í•™ìƒ ì´ë¦„ê³¼ ì ìˆ˜ ë¦¬ìŠ¤íŠ¸ë¥¼ ì €ì¥í•˜ê³ ,\nê° í•™ìƒì˜ í‰ê·  ì ìˆ˜ë¥¼ ì¶œë ¥í•˜ì„¸ìš”.\n\nì˜ˆ: {"ì² ìˆ˜": [80, 90, 70], "ì˜í¬": [95, 85, 100]}',
    hints:[{label:"íŒíŠ¸ 1: ë”•ì…”ë„ˆë¦¬ ìˆœíšŒ",detail:".items()ë¡œ keyì™€ valueë¥¼\në™ì‹œì— ê°€ì ¸ì˜¬ ìˆ˜ ìˆì–´ìš”."},{label:"íŒíŠ¸ 2: í‰ê· ",detail:"í‰ê·  = sum(ë¦¬ìŠ¤íŠ¸) / len(ë¦¬ìŠ¤íŠ¸)"},{label:"ğŸ’¡ ì •ë‹µ ë³´ê¸°",detail:'students = {\n    "ì² ìˆ˜": [80, 90, 70],\n    "ì˜í¬": [95, 85, 100]\n}\nfor name, scores in students.items():\n    avg = sum(scores) / len(scores)\n    print(f"{name}: {avg:.1f}ì ")'}],
    starterCode:'students = {\n    "ì² ìˆ˜": [80, 90, 70],\n    "ì˜í¬": [95, 85, 100]\n}\n# ê° í•™ìƒì˜ í‰ê· ì„ êµ¬í•´ ì¶œë ¥í•˜ì„¸ìš”\n',
    sampleAnswer:'students = {\n    "ì² ìˆ˜": [80, 90, 70],\n    "ì˜í¬": [95, 85, 100]\n}\nfor name, scores in students.items():\n    avg = sum(scores) / len(scores)\n    print(f"{name}: {avg:.1f}ì ")',
    concepts:[{name:"ë”•ì…”ë„ˆë¦¬",desc:"í‚¤(key)ì™€ ê°’(value)ì„ ìŒìœ¼ë¡œ ì €ì¥í•˜ëŠ” ìë£Œêµ¬ì¡°.",example:'d = {"ì´ë¦„": "ì² ìˆ˜", "ë‚˜ì´": 20}\nd["ì´ë¦„"]  â†’ "ì² ìˆ˜"\nd["ë‚˜ì´"]  â†’ 20'},{name:".items()",desc:"ë”•ì…”ë„ˆë¦¬ì˜ í‚¤ì™€ ê°’ì„ ë™ì‹œì— êº¼ë‚´ëŠ” ë©”ì„œë“œ.",example:'d = {"a": 1, "b": 2}\nfor key, val in d.items():\n    print(key, val)\nâ†’ a 1\nâ†’ b 2'},{name:"sum() / len()",desc:"sumì€ í•©ê³„, lenì€ ê°œìˆ˜ë¥¼ êµ¬í•˜ëŠ” ë‚´ì¥ í•¨ìˆ˜.",example:'nums = [80, 90, 70]\nsum(nums) â†’ 240\nlen(nums) â†’ 3\ní‰ê·  = sum(nums)/len(nums) â†’ 80.0'},{name:"f-string :.1f",desc:"ì†Œìˆ˜ì  ìë¦¿ìˆ˜ë¥¼ ì§€ì •í•˜ëŠ” í¬ë§· ë¬¸ë²•.",example:'avg = 85.6667\nf"{avg:.1f}" â†’ "85.7"  (ì†Œìˆ˜ 1ìë¦¬)\nf"{avg:.2f}" â†’ "85.67" (ì†Œìˆ˜ 2ìë¦¬)'}]}
  ]
},

intermediate: {
  name: 'ì¤‘ê¸‰', emoji: 'ğŸ”¥', color: 'intermediate',
  desc: 'ê¸°ì´ˆ ë¬¸ë²•ì„ ì•Œê³  ìˆëŠ” ë¶„',
  topics: ['ë¦¬ìŠ¤íŠ¸ ì»´í”„ë¦¬í—¨ì…˜','ë¬¸ìì—´ ì²˜ë¦¬','ì •ë ¬','2ì°¨ì› ë¦¬ìŠ¤íŠ¸','ì¬ê·€'],
  stages: [
    {id:1,title:"ë¦¬ìŠ¤íŠ¸ ì»´í”„ë¦¬í—¨ì…˜",difficulty:"â­",description:"ë¦¬ìŠ¤íŠ¸ ì»´í”„ë¦¬í—¨ì…˜ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³€í™˜í•˜ì„¸ìš”.",
    task:'ìˆ«ì ë¦¬ìŠ¤íŠ¸ [1,2,3,4,5,6,7,8,9,10]ì—ì„œ\ní™€ìˆ˜ë§Œ ê³¨ë¼ ì œê³±í•œ ìƒˆ ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“œì„¸ìš”.\nê²°ê³¼: [1, 9, 25, 49, 81]',
    hints:[{label:"íŒíŠ¸ 1: ê¸°ë³¸ í˜•íƒœ",detail:"[í‘œí˜„ì‹ for ë³€ìˆ˜ in ë¦¬ìŠ¤íŠ¸]"},{label:"íŒíŠ¸ 2: ì¡°ê±´ ì¶”ê°€",detail:"[í‘œí˜„ì‹ for ë³€ìˆ˜ in ë¦¬ìŠ¤íŠ¸ if ì¡°ê±´]"},{label:"ğŸ’¡ ì •ë‹µ ë³´ê¸°",detail:"nums = [1,2,3,4,5,6,7,8,9,10]\nresult = [x**2 for x in nums if x % 2 != 0]\nprint(result)"}],
    starterCode:"nums = [1,2,3,4,5,6,7,8,9,10]\n# ë¦¬ìŠ¤íŠ¸ ì»´í”„ë¦¬í—¨ì…˜ì„ ì‚¬ìš©í•˜ì„¸ìš”\nresult = \nprint(result)",
    sampleAnswer:"nums = [1,2,3,4,5,6,7,8,9,10]\nresult = [x**2 for x in nums if x % 2 != 0]\nprint(result)",
    concepts:[{name:"ë¦¬ìŠ¤íŠ¸ ì»´í”„ë¦¬í—¨ì…˜",desc:"í•œ ì¤„ë¡œ ë¦¬ìŠ¤íŠ¸ë¥¼ ìƒì„±í•˜ëŠ” íŒŒì´ì¬ ê³ ìœ  ë¬¸ë²•.",example:'[x*2 for x in range(5)]\nâ†’ [0, 2, 4, 6, 8]'},{name:"ì¡°ê±´ í•„í„°ë§",desc:"ì»´í”„ë¦¬í—¨ì…˜ ì•ˆì—ì„œ ifë¡œ ì›í•˜ëŠ” ê°’ë§Œ ì„ íƒ.",example:'[x for x in range(10) if x > 5]\nâ†’ [6, 7, 8, 9]'},{name:"ê±°ë“­ì œê³± (**)",desc:"** ì—°ì‚°ìë¡œ ê±°ë“­ì œê³±(ì œê³±, ì„¸ì œê³± ë“±)ì„ ê³„ì‚°.",example:'3 ** 2  â†’ 9   (3ì˜ ì œê³±)\n2 ** 10 â†’ 1024\n4 ** 0.5 â†’ 2.0 (ì œê³±ê·¼)'},{name:"í™€ìˆ˜ íŒë³„",desc:"2ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€ê°€ 1ì´ë©´ í™€ìˆ˜.",example:'7 % 2 â†’ 1  (í™€ìˆ˜)\n4 % 2 â†’ 0  (ì§ìˆ˜)\n# í™€ìˆ˜ë§Œ: if x % 2 != 0'}]},

    {id:2,title:"ë¬¸ìì—´ ì²˜ë¦¬",difficulty:"â­â­",description:"ë¬¸ì¥ì—ì„œ ë‹¨ì–´ ë¹ˆë„ë¥¼ ì„¸ëŠ” í”„ë¡œê·¸ë¨ì„ ë§Œë“œì„¸ìš”.",
    task:'ë¬¸ì¥ì—ì„œ ê° ë‹¨ì–´ê°€ ëª‡ ë²ˆ ë‚˜ì™”ëŠ”ì§€ ì„¸ì„¸ìš”.\n\ntext = "apple banana apple cherry banana apple"\nê²°ê³¼: apple:3, banana:2, cherry:1',
    hints:[{label:"íŒíŠ¸ 1: ë¶„ë¦¬",detail:'.split()ìœ¼ë¡œ ë‹¨ì–´ë¥¼ ë‚˜ëˆŒ ìˆ˜ ìˆì–´ìš”.\nwords = text.split()'},{label:"íŒíŠ¸ 2: ë”•ì…”ë„ˆë¦¬ë¡œ ì„¸ê¸°",detail:"ë¹ˆ ë”•ì…”ë„ˆë¦¬ë¥¼ ë§Œë“¤ê³ \në‹¨ì–´ê°€ ìˆìœ¼ë©´ +1, ì—†ìœ¼ë©´ 1ë¡œ ì„¤ì •"},{label:"ğŸ’¡ ì •ë‹µ ë³´ê¸°",detail:'text = "apple banana apple cherry banana apple"\nwords = text.split()\ncount = {}\nfor w in words:\n    if w in count:\n        count[w] = count[w] + 1\n    else:\n        count[w] = 1\nfor word, cnt in count.items():\n    print(f"{word}: {cnt}")'}],
    starterCode:'text = "apple banana apple cherry banana apple"\n# ë‹¨ì–´ ë¹ˆë„ë¥¼ ì„¸ì„¸ìš”\n',
    sampleAnswer:'text = "apple banana apple cherry banana apple"\nwords = text.split()\ncount = {}\nfor w in words:\n    if w in count:\n        count[w] = count[w] + 1\n    else:\n        count[w] = 1\nfor word, cnt in count.items():\n    print(f"{word}: {cnt}")',
    concepts:[{name:".split()",desc:"ë¬¸ìì—´ì„ êµ¬ë¶„ìë¡œ ë‚˜ëˆ  ë¦¬ìŠ¤íŠ¸ë¡œ ë§Œë“œëŠ” ë©”ì„œë“œ.",example:'"a b c".split()   â†’ ["a","b","c"]\n"1-2-3".split("-") â†’ ["1","2","3"]'},{name:"ë”•ì…”ë„ˆë¦¬ í™œìš©",desc:"ë”•ì…”ë„ˆë¦¬ë¡œ ë°ì´í„°ë¥¼ ì„¸ê±°ë‚˜ ê·¸ë£¹ì§“ëŠ” íŒ¨í„´.",example:'count = {}\ncount["apple"] = 1\ncount["apple"] = count["apple"] + 1\n# count â†’ {"apple": 2}'},{name:"in ì—°ì‚°ì",desc:"ê°’ì´ ë¦¬ìŠ¤íŠ¸ë‚˜ ë”•ì…”ë„ˆë¦¬ì— ìˆëŠ”ì§€ í™•ì¸.",example:'"a" in ["a","b"] â†’ True\n"x" in {"x":1}   â†’ True\n3 in [1,2]       â†’ False'},{name:"ë¹ˆë„ ì¹´ìš´íŒ…",desc:"ê° í•­ëª©ì´ ëª‡ ë²ˆ ë‚˜ì˜¤ëŠ”ì§€ ì„¸ëŠ” íŒ¨í„´.",example:'for word in words:\n    if word in count:\n        count[word] += 1\n    else:\n        count[word] = 1'}]},

    {id:3,title:"ë²„ë¸” ì •ë ¬ êµ¬í˜„",difficulty:"â­â­â­",description:"ë²„ë¸” ì •ë ¬ ì•Œê³ ë¦¬ì¦˜ì„ ì§ì ‘ êµ¬í˜„í•˜ì„¸ìš”.",
    task:'ë¦¬ìŠ¤íŠ¸ [64, 34, 25, 12, 22, 11, 90]ì„\në²„ë¸” ì •ë ¬ë¡œ ì˜¤ë¦„ì°¨ìˆœ ì •ë ¬í•˜ì„¸ìš”.\n(sorted() ì‚¬ìš© ê¸ˆì§€!)',
    hints:[{label:"íŒíŠ¸ 1: ì›ë¦¬",detail:"ì¸ì ‘í•œ ë‘ ìˆ˜ë¥¼ ë¹„êµí•˜ì—¬\ní° ìˆ˜ë¥¼ ë’¤ë¡œ ë³´ë‚´ëŠ” ê²ƒì„ ë°˜ë³µ"},{label:"íŒíŠ¸ 2: ì´ì¤‘ ë°˜ë³µë¬¸",detail:"ë°”ê¹¥ for: ì „ì²´ ë°˜ë³µ íšŸìˆ˜\nì•ˆìª½ for: ì¸ì ‘ ë¹„êµ"},{label:"ğŸ’¡ ì •ë‹µ ë³´ê¸°",detail:'nums = [64, 34, 25, 12, 22, 11, 90]\nn = len(nums)\nfor i in range(n):\n    for j in range(0, n-i-1):\n        if nums[j] > nums[j+1]:\n            nums[j], nums[j+1] = nums[j+1], nums[j]\nprint(nums)'}],
    starterCode:'nums = [64, 34, 25, 12, 22, 11, 90]\n# ë²„ë¸” ì •ë ¬ì„ êµ¬í˜„í•˜ì„¸ìš”\n\nprint(nums)',
    sampleAnswer:'nums = [64, 34, 25, 12, 22, 11, 90]\nn = len(nums)\nfor i in range(n):\n    for j in range(0, n-i-1):\n        if nums[j] > nums[j+1]:\n            nums[j], nums[j+1] = nums[j+1], nums[j]\nprint(nums)',
    concepts:[{name:"ë²„ë¸” ì •ë ¬",desc:"ì¸ì ‘í•œ ë‘ ì›ì†Œë¥¼ ë¹„êµÂ·êµí™˜í•˜ë©° ì •ë ¬í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜.",example:'[5,3,1] â†’ [3,5,1] â†’ [3,1,5]\nâ†’ [1,3,5] (ì™„ë£Œ)'},{name:"ì´ì¤‘ ë°˜ë³µë¬¸",desc:"ë°˜ë³µë¬¸ ì•ˆì— ë°˜ë³µë¬¸ì´ ìˆëŠ” êµ¬ì¡°.",example:'for i in range(3):\n    for j in range(3):\n        print(i, j)\n# (0,0)(0,1)(0,2)(1,0)...'},{name:"ê°’ êµí™˜ (swap)",desc:"ë‘ ë³€ìˆ˜ì˜ ê°’ì„ ì„œë¡œ ë°”ê¾¸ëŠ” ê¸°ë²•.",example:'a, b = b, a  # íŒŒì´ì¬ ìŠ¤ì™‘\n\n# ë¦¬ìŠ¤íŠ¸ì—ì„œ:\nnums[0], nums[1] = nums[1], nums[0]'},{name:"ì•Œê³ ë¦¬ì¦˜ ê¸°ì´ˆ",desc:"ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ë‹¨ê³„ì  ì ˆì°¨. íš¨ìœ¨ì„±ì´ ì¤‘ìš”!",example:'ë²„ë¸” ì •ë ¬: O(nÂ²) â€” ëŠë¦¼\ní€µ ì •ë ¬:  O(n log n) â€” ë¹ ë¦„\nn=1000ì¼ ë•Œ ì°¨ì´: 100ë§Œ vs 1ë§Œ'}]},

    {id:4,title:"2ì°¨ì› ë¦¬ìŠ¤íŠ¸",difficulty:"â­â­â­â­",description:"êµ¬êµ¬ë‹¨ í‘œë¥¼ 2ì°¨ì› ë¦¬ìŠ¤íŠ¸ë¡œ ë§Œë“œì„¸ìš”.",
    task:'2~9ë‹¨ì˜ êµ¬êµ¬ë‹¨ì„ 2ì°¨ì› ë¦¬ìŠ¤íŠ¸ë¡œ ë§Œë“¤ê³ \nê° ë‹¨ì˜ ê²°ê³¼ë¥¼ ì¶œë ¥í•˜ì„¸ìš”.\n\nì¶œë ¥ ì˜ˆ:\n2ë‹¨: 2 4 6 8 10 12 14 16 18\n3ë‹¨: 3 6 9 12 15 18 21 24 27\n...',
    hints:[{label:"íŒíŠ¸ 1: 2ì°¨ì› ë¦¬ìŠ¤íŠ¸",detail:"ë°”ê¹¥ ë¦¬ìŠ¤íŠ¸ ì•ˆì— ë¦¬ìŠ¤íŠ¸ë“¤ì´ ë“¤ì–´ìˆëŠ” êµ¬ì¡°\n[[1,2,3], [4,5,6]]"},{label:"íŒíŠ¸ 2: ì´ì¤‘ ë°˜ë³µë¬¸",detail:"for i in range(2, 10):\n    row = []\n    for j in range(1, 10):\n        row.append(i * j)"},{label:"ğŸ’¡ ì •ë‹µ ë³´ê¸°",detail:'table = []\nfor i in range(2, 10):\n    row = []\n    for j in range(1, 10):\n        row.append(i * j)\n    table.append(row)\nfor i in range(len(table)):\n    dan = i + 2\n    nums = table[i]\n    line = " ".join([str(n) for n in nums])\n    print(f"{dan}ë‹¨: {line}")'}],
    starterCode:'# êµ¬êµ¬ë‹¨ 2ì°¨ì› ë¦¬ìŠ¤íŠ¸ë¥¼ ë§Œë“œì„¸ìš”\ntable = []\n\n',
    sampleAnswer:'table = []\nfor i in range(2, 10):\n    row = []\n    for j in range(1, 10):\n        row.append(i * j)\n    table.append(row)\nfor i in range(len(table)):\n    dan = i + 2\n    nums = table[i]\n    line = " ".join([str(n) for n in nums])\n    print(f"{dan}ë‹¨: {line}")',
    concepts:[{name:"2ì°¨ì› ë¦¬ìŠ¤íŠ¸",desc:"ë¦¬ìŠ¤íŠ¸ ì•ˆì— ë¦¬ìŠ¤íŠ¸ê°€ ë“¤ì–´ìˆëŠ” í‘œ(í–‰ë ¬) êµ¬ì¡°.",example:'table = [[1,2,3],\n         [4,5,6]]\ntable[0][1] â†’ 2  (0í–‰ 1ì—´)\ntable[1][2] â†’ 6  (1í–‰ 2ì—´)'},{name:"ì´ì¤‘ ë°˜ë³µë¬¸",desc:"ë°”ê¹¥ ë°˜ë³µ = í–‰, ì•ˆìª½ ë°˜ë³µ = ì—´ ì²˜ë¦¬ì— í™œìš©.",example:'for i in range(3):     # í–‰\n    for j in range(3): # ì—´\n        print(i*3+j+1, end=" ")\n    print()  # ì¤„ë°”ê¿ˆ'},{name:".append()",desc:"ë¦¬ìŠ¤íŠ¸ ëì— ìƒˆ í•­ëª©ì„ ì¶”ê°€í•˜ëŠ” ë©”ì„œë“œ.",example:'fruits = ["ì‚¬ê³¼"]\nfruits.append("ë°°")\n# ["ì‚¬ê³¼", "ë°°"]'},{name:"ë¦¬ìŠ¤íŠ¸ â†’ ë¬¸ìì—´",desc:'.join()ìœ¼ë¡œ ë¦¬ìŠ¤íŠ¸ë¥¼ í•˜ë‚˜ì˜ ë¬¸ìì—´ë¡œ í•©ì¹˜ê¸°.',example:'" ".join(["a","b","c"])\nâ†’ "a b c"\n"-".join(["2025","01","01"])\nâ†’ "2025-01-01"'}]},

    {id:5,title:"ì¬ê·€ í•¨ìˆ˜",difficulty:"â­â­â­â­â­",description:"ì¬ê·€ë¡œ í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´ì„ êµ¬í˜„í•˜ì„¸ìš”.",
    task:'ì¬ê·€ í•¨ìˆ˜ë¡œ në²ˆì§¸ í”¼ë³´ë‚˜ì¹˜ ìˆ˜ë¥¼ êµ¬í•˜ì„¸ìš”.\ní”¼ë³´ë‚˜ì¹˜: 0, 1, 1, 2, 3, 5, 8, 13, 21...\nfib(0)=0, fib(1)=1, fib(n)=fib(n-1)+fib(n-2)\n\n0~9ë²ˆì§¸ê¹Œì§€ ì¶œë ¥í•˜ì„¸ìš”.',
    hints:[{label:"íŒíŠ¸ 1: ì¬ê·€ë€",detail:"í•¨ìˆ˜ê°€ ìê¸° ìì‹ ì„ í˜¸ì¶œí•˜ëŠ” ê²ƒ\në°˜ë“œì‹œ ì¢…ë£Œ ì¡°ê±´(base case)ì´ í•„ìš”!"},{label:"íŒíŠ¸ 2: ì¢…ë£Œ ì¡°ê±´",detail:"if n <= 0: return 0\nif n == 1: return 1"},{label:"ğŸ’¡ ì •ë‹µ ë³´ê¸°",detail:'def fib(n):\n    if n <= 0:\n        return 0\n    if n == 1:\n        return 1\n    return fib(n-1) + fib(n-2)\n\nfor i in range(10):\n    print(f"fib({i}) = {fib(i)}")'}],
    starterCode:'def fib(n):\n    # ì¬ê·€ë¡œ í”¼ë³´ë‚˜ì¹˜ë¥¼ êµ¬í˜„í•˜ì„¸ìš”\n    pass\n\nfor i in range(10):\n    print(f"fib({i}) = {fib(i)}")',
    sampleAnswer:'def fib(n):\n    if n <= 0:\n        return 0\n    if n == 1:\n        return 1\n    return fib(n-1) + fib(n-2)\n\nfor i in range(10):\n    print(f"fib({i}) = {fib(i)}")',
    concepts:[{name:"ì¬ê·€ í•¨ìˆ˜",desc:"í•¨ìˆ˜ê°€ ìê¸° ìì‹ ì„ ë‹¤ì‹œ í˜¸ì¶œí•˜ëŠ” ê¸°ë²•.",example:'def countdown(n):\n    if n <= 0:\n        return\n    print(n)\n    countdown(n-1)  # ìê¸° ìì‹  í˜¸ì¶œ'},{name:"ì¢…ë£Œ ì¡°ê±´ (base case)",desc:"ì¬ê·€ë¥¼ ë©ˆì¶”ëŠ” ì¡°ê±´. ì—†ìœ¼ë©´ ë¬´í•œ ë°˜ë³µ!",example:'def fib(n):\n    if n <= 1:   # â† ì¢…ë£Œ ì¡°ê±´\n        return n\n    return fib(n-1) + fib(n-2)'},{name:"í”¼ë³´ë‚˜ì¹˜ ìˆ˜ì—´",desc:"ì•ì˜ ë‘ ìˆ˜ë¥¼ ë”í•´ ë‹¤ìŒ ìˆ˜ë¥¼ ë§Œë“œëŠ” ìˆ˜ì—´.",example:'0, 1, 1, 2, 3, 5, 8, 13, 21...\nfib(0)=0, fib(1)=1\nfib(n) = fib(n-1) + fib(n-2)'},{name:"í•¨ìˆ˜ í˜¸ì¶œ ìŠ¤íƒ",desc:"ì¬ê·€ í˜¸ì¶œì´ ìŒ“ì´ëŠ” êµ¬ì¡°. ì¢…ë£Œ í›„ ì—­ìˆœ ì‹¤í–‰.",example:'fib(4)\nâ†’ fib(3) + fib(2)\n  â†’ fib(2)+fib(1) + fib(1)+fib(0)\n    â†’ ... ì ì  í¼ì³ì§'}]}]},

advanced: {
  name: 'ê³ ê¸‰', emoji: 'ğŸ’', color: 'advanced',
  desc: 'ì•Œê³ ë¦¬ì¦˜ê³¼ ì‹¬í™” ë¬¸ë²•ì„ ë„ì „í•˜ëŠ” ë¶„',
  topics: ['í´ë˜ìŠ¤(OOP)','ë°ì½”ë ˆì´í„°','ì´ì§„íƒìƒ‰','ìŠ¤íƒ/í','ë™ì  í”„ë¡œê·¸ë˜ë°'],
  stages: [
    {id:1,title:"í´ë˜ìŠ¤ (OOP)",difficulty:"â­",description:"ì€í–‰ ê³„ì¢Œ í´ë˜ìŠ¤ë¥¼ ë§Œë“œì„¸ìš”.",
    task:'BankAccount í´ë˜ìŠ¤ë¥¼ ë§Œë“œì„¸ìš”.\n- __init__(self, owner, balance): ì´ˆê¸°í™”\n- deposit(self, amount): ì…ê¸ˆ\n- withdraw(self, amount): ì¶œê¸ˆ (ì”ì•¡ ë¶€ì¡±ì‹œ ë©”ì‹œì§€)\n- info(self): ì •ë³´ ì¶œë ¥\n\nacc = BankAccount("í™ê¸¸ë™", 10000)\nacc.deposit(5000)\nacc.withdraw(3000)\nacc.info()  â†’ "í™ê¸¸ë™ë‹˜ì˜ ì”ì•¡: 12000ì›"',
    hints:[{label:"íŒíŠ¸ 1: í´ë˜ìŠ¤ ì„ ì–¸",detail:"class BankAccount:\n    def __init__(self, owner, balance):\n        self.owner = owner\n        self.balance = balance"},{label:"íŒíŠ¸ 2: ë©”ì„œë“œ",detail:"def deposit(self, amount):\n    self.balance = self.balance + amount"},{label:"ğŸ’¡ ì •ë‹µ ë³´ê¸°",detail:'class BankAccount:\n    def __init__(self, owner, balance):\n        self.owner = owner\n        self.balance = balance\n    def deposit(self, amount):\n        self.balance = self.balance + amount\n    def withdraw(self, amount):\n        if amount > self.balance:\n            print("ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤")\n        else:\n            self.balance = self.balance - amount\n    def info(self):\n        print(f"{self.owner}ë‹˜ì˜ ì”ì•¡: {self.balance}ì›")\n\nacc = BankAccount("í™ê¸¸ë™", 10000)\nacc.deposit(5000)\nacc.withdraw(3000)\nacc.info()'}],
    starterCode:'class BankAccount:\n    # í´ë˜ìŠ¤ë¥¼ ì™„ì„±í•˜ì„¸ìš”\n    pass\n\nacc = BankAccount("í™ê¸¸ë™", 10000)\nacc.deposit(5000)\nacc.withdraw(3000)\nacc.info()',
    sampleAnswer:'class BankAccount:\n    def __init__(self, owner, balance):\n        self.owner = owner\n        self.balance = balance\n    def deposit(self, amount):\n        self.balance = self.balance + amount\n    def withdraw(self, amount):\n        if amount > self.balance:\n            print("ì”ì•¡ì´ ë¶€ì¡±í•©ë‹ˆë‹¤")\n        else:\n            self.balance = self.balance - amount\n    def info(self):\n        print(f"{self.owner}ë‹˜ì˜ ì”ì•¡: {self.balance}ì›")\n\nacc = BankAccount("í™ê¸¸ë™", 10000)\nacc.deposit(5000)\nacc.withdraw(3000)\nacc.info()',
    concepts:[{name:"class ì„ ì–¸",desc:"ê°ì²´ì˜ ì„¤ê³„ë„. ì†ì„±(ë°ì´í„°)ê³¼ ë©”ì„œë“œ(ë™ì‘)ë¥¼ ë¬¶ì–´ìš”.",example:'class Dog:\n    def bark(self):\n        print("ë©ë©!")\n\nmy_dog = Dog()\nmy_dog.bark()  â†’ ë©ë©!'},{name:"__init__ ìƒì„±ì",desc:"ê°ì²´ê°€ ë§Œë“¤ì–´ì§ˆ ë•Œ ìë™ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ì´ˆê¸°í™” í•¨ìˆ˜.",example:'class Person:\n    def __init__(self, name):\n        self.name = name\n\np = Person("ì² ìˆ˜")\nprint(p.name) â†’ ì² ìˆ˜'},{name:"self",desc:"í˜„ì¬ ê°ì²´ ìì‹ ì„ ê°€ë¦¬í‚¤ëŠ” ì°¸ì¡°. ë©”ì„œë“œì˜ ì²« ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜.",example:'class Cat:\n    def __init__(self, name):\n        self.name = name  # ì´ ê°ì²´ì˜ name\n    def say(self):\n        print(self.name)  # ì´ ê°ì²´ì˜ name ì‚¬ìš©'},{name:"ë©”ì„œë“œ ì •ì˜",desc:"í´ë˜ìŠ¤ ì•ˆì— defë¡œ ì •ì˜í•˜ëŠ” í•¨ìˆ˜. ì²« ì¸ìëŠ” í•­ìƒ self.",example:'class Calc:\n    def add(self, a, b):\n        return a + b\n\nc = Calc()\nc.add(3, 5) â†’ 8'}]},

    {id:2,title:"í´ë˜ìŠ¤ ìƒì†",difficulty:"â­â­",description:"ë™ë¬¼ í´ë˜ìŠ¤ë¥¼ ìƒì†í•˜ì—¬ í™•ì¥í•˜ì„¸ìš”.",
    task:'Animal í´ë˜ìŠ¤ì™€ ì´ë¥¼ ìƒì†í•˜ëŠ”\nDog, Cat í´ë˜ìŠ¤ë¥¼ ë§Œë“œì„¸ìš”.\n\nAnimal: name, speak() â†’ "..."\nDog: speak() â†’ "{name}ê°€ ë©ë©!"\nCat: speak() â†’ "{name}ê°€ ì•¼ì˜¹!"\n\ndog = Dog("ë°”ë‘‘ì´")\ncat = Cat("ë‚˜ë¹„")\nê°ê° speak() í˜¸ì¶œ ê²°ê³¼ ì¶œë ¥',
    hints:[{label:"íŒíŠ¸ 1: ìƒì†",detail:"class Dog(Animal):\n    ë¶€ëª¨ í´ë˜ìŠ¤ Animalì„ ìƒì†ë°›ìŒ"},{label:"íŒíŠ¸ 2: ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë”©",detail:"ë¶€ëª¨ì˜ speak()ì„ ìì‹ì—ì„œ\nìƒˆë¡œ ì •ì˜í•˜ë©´ ë®ì–´ì”Œì›Œì§"},{label:"ğŸ’¡ ì •ë‹µ ë³´ê¸°",detail:'class Animal:\n    def __init__(self, name):\n        self.name = name\n    def speak(self):\n        print("...")\n\nclass Dog(Animal):\n    def speak(self):\n        print(f"{self.name}ê°€ ë©ë©!")\n\nclass Cat(Animal):\n    def speak(self):\n        print(f"{self.name}ê°€ ì•¼ì˜¹!")\n\ndog = Dog("ë°”ë‘‘ì´")\ncat = Cat("ë‚˜ë¹„")\ndog.speak()\ncat.speak()'}],
    starterCode:'class Animal:\n    def __init__(self, name):\n        self.name = name\n    def speak(self):\n        print("...")\n\n# Dog, Cat í´ë˜ìŠ¤ë¥¼ ë§Œë“œì„¸ìš”\n\ndog = Dog("ë°”ë‘‘ì´")\ncat = Cat("ë‚˜ë¹„")\ndog.speak()\ncat.speak()',
    sampleAnswer:'class Animal:\n    def __init__(self, name):\n        self.name = name\n    def speak(self):\n        print("...")\n\nclass Dog(Animal):\n    def speak(self):\n        print(f"{self.name}ê°€ ë©ë©!")\n\nclass Cat(Animal):\n    def speak(self):\n        print(f"{self.name}ê°€ ì•¼ì˜¹!")\n\ndog = Dog("ë°”ë‘‘ì´")\ncat = Cat("ë‚˜ë¹„")\ndog.speak()\ncat.speak()',
    concepts:[{name:"í´ë˜ìŠ¤ ìƒì†",desc:"ê¸°ì¡´ í´ë˜ìŠ¤ì˜ ê¸°ëŠ¥ì„ ë¬¼ë ¤ë°›ì•„ ìƒˆ í´ë˜ìŠ¤ë¥¼ ë§Œë“œëŠ” ê²ƒ.",example:'class Animal:        # ë¶€ëª¨\n    pass\nclass Dog(Animal):   # ìì‹\n    pass\n# DogëŠ” Animalì˜ ëª¨ë“  ê¸°ëŠ¥ì„ ê°€ì§'},{name:"ë©”ì„œë“œ ì˜¤ë²„ë¼ì´ë”©",desc:"ë¶€ëª¨ì˜ ë©”ì„œë“œë¥¼ ìì‹ì—ì„œ ê°™ì€ ì´ë¦„ìœ¼ë¡œ ë‹¤ì‹œ ì •ì˜.",example:'class Animal:\n    def speak(self): print("...")\nclass Dog(Animal):\n    def speak(self): print("ë©ë©!")\n# Dogì˜ speak()ì´ ìš°ì„  ì‹¤í–‰ë¨'},{name:"ë‹¤í˜•ì„±",desc:"ê°™ì€ ë©”ì„œë“œëª…ì´ ê°ì²´ ì¢…ë¥˜ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ë™ì‘í•˜ëŠ” ê²ƒ.",example:'animals = [Dog(), Cat()]\nfor a in animals:\n    a.speak()\n# ê°ì ë‹¤ë¥¸ ê²°ê³¼ ì¶œë ¥'},{name:"super() / self",desc:"super()ëŠ” ë¶€ëª¨ í´ë˜ìŠ¤, selfëŠ” í˜„ì¬ ê°ì²´ë¥¼ ê°€ë¦¬í‚´.",example:'class Dog(Animal):\n    def __init__(self, name, breed):\n        super().__init__(name)\n        self.breed = breed'}]},

    {id:3,title:"ì´ì§„ íƒìƒ‰",difficulty:"â­â­â­",description:"ì´ì§„ íƒìƒ‰ ì•Œê³ ë¦¬ì¦˜ì„ êµ¬í˜„í•˜ì„¸ìš”.",
    task:'ì •ë ¬ëœ ë¦¬ìŠ¤íŠ¸ì—ì„œ targetì„ ì´ì§„ íƒìƒ‰ìœ¼ë¡œ ì°¾ìœ¼ì„¸ìš”.\nì°¾ìœ¼ë©´ ì¸ë±ìŠ¤, ì—†ìœ¼ë©´ -1ì„ ë°˜í™˜í•˜ì„¸ìš”.\n\nnums = [2,5,8,12,16,23,38,56,72,91]\nbinary_search(nums, 23) â†’ 5\nbinary_search(nums, 10) â†’ -1',
    hints:[{label:"íŒíŠ¸ 1: ì›ë¦¬",detail:"ì¤‘ê°„ê°’ê³¼ ë¹„êµ â†’ ì‘ìœ¼ë©´ ì™¼ìª½, í¬ë©´ ì˜¤ë¥¸ìª½\në²”ìœ„ë¥¼ ì ˆë°˜ì”© ì¤„ì—¬ë‚˜ê°"},{label:"íŒíŠ¸ 2: í¬ì¸í„°",detail:"left = 0, right = len(nums)-1\nmid = (left + right) // 2"},{label:"ğŸ’¡ ì •ë‹µ ë³´ê¸°",detail:'def binary_search(nums, target):\n    left = 0\n    right = len(nums) - 1\n    while left <= right:\n        mid = (left + right) // 2\n        if nums[mid] == target:\n            return mid\n        elif nums[mid] < target:\n            left = mid + 1\n        else:\n            right = mid - 1\n    return -1\n\nnums = [2,5,8,12,16,23,38,56,72,91]\nprint(binary_search(nums, 23))\nprint(binary_search(nums, 10))'}],
    starterCode:'def binary_search(nums, target):\n    # ì´ì§„ íƒìƒ‰ì„ êµ¬í˜„í•˜ì„¸ìš”\n    pass\n\nnums = [2,5,8,12,16,23,38,56,72,91]\nprint(binary_search(nums, 23))\nprint(binary_search(nums, 10))',
    sampleAnswer:'def binary_search(nums, target):\n    left = 0\n    right = len(nums) - 1\n    while left <= right:\n        mid = (left + right) // 2\n        if nums[mid] == target:\n            return mid\n        elif nums[mid] < target:\n            left = mid + 1\n        else:\n            right = mid - 1\n    return -1\n\nnums = [2,5,8,12,16,23,38,56,72,91]\nprint(binary_search(nums, 23))\nprint(binary_search(nums, 10))',
    concepts:[{name:"ì´ì§„ íƒìƒ‰",desc:"ì •ë ¬ëœ ë°ì´í„°ì—ì„œ ì¤‘ê°„ê°’ì„ ë¹„êµí•´ ë²”ìœ„ë¥¼ ì ˆë°˜ì”© ì¤„ì—¬ ì°¾ê¸°.",example:'[2,5,8,12,16,23] ì—ì„œ 16 ì°¾ê¸°:\nì¤‘ê°„=8 â†’ 16>8 â†’ ì˜¤ë¥¸ìª½ íƒìƒ‰\nì¤‘ê°„=16 â†’ ì°¾ì•˜ë‹¤! (3ë²ˆë§Œì—)'},{name:"O(log n) ì‹œê°„ë³µì¡ë„",desc:"ë°ì´í„°ê°€ 2ë°°ë¡œ ëŠ˜ì–´ë„ íƒìƒ‰ íšŸìˆ˜ëŠ” 1ë²ˆë§Œ ì¦ê°€.",example:'n=1000 â†’ ì•½ 10ë²ˆ ë¹„êµ\nn=1000000 â†’ ì•½ 20ë²ˆ ë¹„êµ\nìˆœì°¨ íƒìƒ‰ O(n)ë³´ë‹¤ í›¨ì”¬ ë¹ ë¦„!'},{name:"íˆ¬ í¬ì¸í„°",desc:"left, right ë‘ ê°œì˜ í¬ì¸í„°ë¡œ íƒìƒ‰ ë²”ìœ„ë¥¼ ì¡°ì ˆ.",example:'left = 0\nright = len(nums) - 1\nmid = (left + right) // 2\n# ì¡°ê±´ì— ë”°ë¼ leftâ†‘ ë˜ëŠ” rightâ†“'},{name:"while ë°˜ë³µë¬¸",desc:"ì¡°ê±´ì´ ì°¸ì¸ ë™ì•ˆ ê³„ì† ë°˜ë³µ. ì¢…ë£Œ ì¡°ê±´ì´ ì¤‘ìš”!",example:'while left <= right:\n    mid = (left+right) // 2\n    if found: return mid\n    # left ë˜ëŠ” right ì—…ë°ì´íŠ¸'}]},

    {id:4,title:"ìŠ¤íƒìœ¼ë¡œ ê´„í˜¸ ê²€ì‚¬",difficulty:"â­â­â­â­",description:"ê´„í˜¸ê°€ ì˜¬ë°”ë¥¸ì§€ ê²€ì‚¬í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“œì„¸ìš”.",
    task:'ë¬¸ìì—´ì˜ ê´„í˜¸ ì§ì´ ë§ëŠ”ì§€ ê²€ì‚¬í•˜ì„¸ìš”.\n() [] {} ì„¸ ì¢…ë¥˜ë¥¼ ëª¨ë‘ ì²˜ë¦¬í•´ì•¼ í•©ë‹ˆë‹¤.\n\nis_valid("([{}])") â†’ True\nis_valid("([)]") â†’ False\nis_valid("{[}") â†’ False',
    hints:[{label:"íŒíŠ¸ 1: ìŠ¤íƒ í™œìš©",detail:"ì—¬ëŠ” ê´„í˜¸ â†’ ìŠ¤íƒì— push\në‹«ëŠ” ê´„í˜¸ â†’ ìŠ¤íƒì—ì„œ popí•˜ì—¬ ì§ ë¹„êµ"},{label:"íŒíŠ¸ 2: ë§¤í•‘",detail:'ì§ì„ ë”•ì…”ë„ˆë¦¬ë¡œ ë§¤í•‘\npairs = {")":"(", "]":"[", "}":"{"}'},{label:"ğŸ’¡ ì •ë‹µ ë³´ê¸°",detail:'def is_valid(s):\n    stack = []\n    pairs = {")":"(", "]":"[", "}":"{"}\n    for ch in s:\n        if ch in "([{":\n            stack.append(ch)\n        elif ch in ")]}":\n            if len(stack) == 0:\n                return False\n            top = stack.pop()\n            if top != pairs[ch]:\n                return False\n    return len(stack) == 0\n\nprint(is_valid("([{}])"))\nprint(is_valid("([)]"))\nprint(is_valid("{[}"))'}],
    starterCode:'def is_valid(s):\n    # ê´„í˜¸ ê²€ì‚¬ë¥¼ êµ¬í˜„í•˜ì„¸ìš”\n    pass\n\nprint(is_valid("([{}])"))\nprint(is_valid("([)]"))\nprint(is_valid("{[}"))',
    sampleAnswer:'def is_valid(s):\n    stack = []\n    pairs = {")":"(", "]":"[", "}":"{"}\n    for ch in s:\n        if ch in "([{":\n            stack.append(ch)\n        elif ch in ")]}":\n            if len(stack) == 0:\n                return False\n            top = stack.pop()\n            if top != pairs[ch]:\n                return False\n    return len(stack) == 0\n\nprint(is_valid("([{}])"))\nprint(is_valid("([)]"))\nprint(is_valid("{[}"))',
    concepts:[{name:"ìŠ¤íƒ ìë£Œêµ¬ì¡°",desc:"LIFO(í›„ì…ì„ ì¶œ) â€” ë‚˜ì¤‘ì— ë„£ì€ ê²ƒì´ ë¨¼ì € ë‚˜ì˜´. ì ‘ì‹œ ìŒ“ê¸°!",example:'stack = []\nstack.append("A")  # [A]\nstack.append("B")  # [A, B]\nstack.pop()        # "B" â†’ [A]'},{name:".append() / .pop()",desc:"appendëŠ” ëì— ì¶”ê°€, popì€ ëì—ì„œ ì œê±°í•˜ë©° ë°˜í™˜.",example:'s = [1, 2, 3]\ns.append(4)  â†’ [1,2,3,4]\nx = s.pop()  â†’ x=4, s=[1,2,3]'},{name:"ê´„í˜¸ ë§¤ì¹­",desc:"ì—¬ëŠ” ê´„í˜¸ë¥¼ ìŠ¤íƒì— ë„£ê³ , ë‹«ëŠ” ê´„í˜¸ê°€ ì˜¤ë©´ ì§ì„ í™•ì¸.",example:'"([])"\n( â†’ push â†’ [(\n[ â†’ push â†’ [(,[\n] â†’ pop [ â†’ ì§ ë§ìŒ â†’ [(\n) â†’ pop ( â†’ ì§ ë§ìŒ â†’ [] âœ…'},{name:"ë”•ì…”ë„ˆë¦¬ ë§¤í•‘",desc:"ë‹«ëŠ” ê´„í˜¸ â†’ ì—¬ëŠ” ê´„í˜¸ë¡œ ë§¤í•‘í•˜ì—¬ ì§ì„ ë¹„êµ.",example:'pairs = {\n    ")": "(",\n    "]": "[",\n    "}": "{"\n}\npairs[")"] â†’ "("'}]},

    {id:5,title:"ë™ì  í”„ë¡œê·¸ë˜ë°",difficulty:"â­â­â­â­â­",description:"ê³„ë‹¨ ì˜¤ë¥´ê¸° ë¬¸ì œë¥¼ DPë¡œ í’€ì–´ë³´ì„¸ìš”.",
    task:'nê°œì˜ ê³„ë‹¨ì„ ì˜¤ë¥´ëŠ” ë°©ë²•ì˜ ìˆ˜ë¥¼ êµ¬í•˜ì„¸ìš”.\ní•œ ë²ˆì— 1ì¹¸ ë˜ëŠ” 2ì¹¸ ì˜¤ë¥¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nclimb(1) â†’ 1ê°€ì§€\nclimb(2) â†’ 2ê°€ì§€\nclimb(3) â†’ 3ê°€ì§€\nclimb(5) â†’ 8ê°€ì§€\n\n1~10ê¹Œì§€ ê²°ê³¼ë¥¼ ì¶œë ¥í•˜ì„¸ìš”.',
    hints:[{label:"íŒíŠ¸ 1: ì í™”ì‹",detail:"në²ˆì§¸ ê³„ë‹¨ì— ë„ë‹¬í•˜ëŠ” ë°©ë²• =\n(n-1)ë²ˆì§¸ì—ì„œ 1ì¹¸ + (n-2)ë²ˆì§¸ì—ì„œ 2ì¹¸\ndp[n] = dp[n-1] + dp[n-2]"},{label:"íŒíŠ¸ 2: ì´ˆê¸°ê°’",detail:"dp[1] = 1 (í•œ ì¹¸)\ndp[2] = 2 (1+1 ë˜ëŠ” 2)"},{label:"ğŸ’¡ ì •ë‹µ ë³´ê¸°",detail:'def climb(n):\n    if n <= 1:\n        return 1\n    if n == 2:\n        return 2\n    dp = [0] * (n + 1)\n    dp[1] = 1\n    dp[2] = 2\n    for i in range(3, n + 1):\n        dp[i] = dp[i-1] + dp[i-2]\n    return dp[n]\n\nfor i in range(1, 11):\n    print(f"climb({i}) = {climb(i)}")'}],
    starterCode:'def climb(n):\n    # DPë¡œ ê³„ë‹¨ ì˜¤ë¥´ê¸°ë¥¼ êµ¬í˜„í•˜ì„¸ìš”\n    pass\n\nfor i in range(1, 11):\n    print(f"climb({i}) = {climb(i)}")',
    sampleAnswer:'def climb(n):\n    if n <= 1:\n        return 1\n    if n == 2:\n        return 2\n    dp = [0] * (n + 1)\n    dp[1] = 1\n    dp[2] = 2\n    for i in range(3, n + 1):\n        dp[i] = dp[i-1] + dp[i-2]\n    return dp[n]\n\nfor i in range(1, 11):\n    print(f"climb({i}) = {climb(i)}")',
    concepts:[{name:"ë™ì  í”„ë¡œê·¸ë˜ë°",desc:"í° ë¬¸ì œë¥¼ ì‘ì€ ë¶€ë¶„ ë¬¸ì œë¡œ ë‚˜ëˆ  í’€ê³ , ê²°ê³¼ë¥¼ ì €ì¥í•´ ì¬í™œìš©.",example:'# ê³„ë‹¨ 3ì¹¸ ì˜¤ë¥´ê¸° = \n# 2ì¹¸ì—ì„œ 1ì¹¸ + 1ì¹¸ì—ì„œ 2ì¹¸\ndp[3] = dp[2] + dp[1] = 2+1 = 3'},{name:"ì í™”ì‹",desc:"í˜„ì¬ ê°’ì„ ì´ì „ ê°’ë“¤ì˜ ê´€ê³„ë¡œ í‘œí˜„í•˜ëŠ” ìˆ˜í•™ ê³µì‹.",example:'dp[n] = dp[n-1] + dp[n-2]\n\ndp[1]=1, dp[2]=2\ndp[3]=3, dp[4]=5, dp[5]=8'},{name:"ë©”ëª¨ì´ì œì´ì…˜",desc:"ì´ë¯¸ ê³„ì‚°í•œ ê²°ê³¼ë¥¼ ì €ì¥í•´ë‘ê³ , ê°™ì€ ê³„ì‚°ì„ ë°˜ë³µí•˜ì§€ ì•Šê¸°.",example:'# ì €ì¥ ì—†ì´: fib(5)ì—ì„œ fib(2)ë¥¼ 3ë²ˆ ê³„ì‚°\n# ì €ì¥ ìˆìœ¼ë©´: fib(2)ë¥¼ 1ë²ˆë§Œ ê³„ì‚°\nmemo = {}\nmemo[n] = result  # ì €ì¥!'},{name:"Bottom-up ë°©ì‹",desc:"ì‘ì€ ê°’ë¶€í„° ì°¨ë¡€ë¡œ ê³„ì‚°í•´ ì˜¬ë¼ê°€ëŠ” DP ì ‘ê·¼ë²•.",example:'dp = [0] * (n+1)\ndp[1] = 1\ndp[2] = 2\nfor i in range(3, n+1):\n    dp[i] = dp[i-1] + dp[i-2]'}]}
  ]
}
};

// ==================== STATE ====================
let currentCourse=null,currentStage=0,code='',openHints={},completedStages=new Set(),showConcepts=false,showAnswer=false,savedCodes={},lastRunResult=null;
function saveP(){try{localStorage.setItem('pyD5',JSON.stringify({course:currentCourse,s:currentStage,c:[...completedStages],codes:savedCodes}))}catch(e){}}
function loadP(){try{const r=localStorage.getItem('pyD5');if(r){const d=JSON.parse(r);if(d.course)currentCourse=d.course;if(typeof d.s==='number')currentStage=d.s;if(d.c)d.c.forEach(i=>completedStages.add(i));if(d.codes)savedCodes=d.codes;}}catch(e){}}
loadP();

// ==================== MINI PYTHON INTERPRETER ====================
function miniPython(src){const output=[];const globals={};const funcs={};const classes={};
const builtins={len:a=>Array.isArray(a)?a.length:typeof a==='string'?a.length:typeof a==='object'?Object.keys(a).length:0,sum:a=>a.reduce((x,y)=>x+y,0),range:(...a)=>{let s=0,e=0,st=1;if(a.length===1)e=a[0];else if(a.length>=2){s=a[0];e=a[1];if(a[2])st=a[2]}const r=[];if(st>0)for(let i=s;i<e;i+=st)r.push(i);else for(let i=s;i>e;i+=st)r.push(i);return r},int:a=>parseInt(a),float:a=>parseFloat(a),str:a=>pyStr(a),abs:a=>Math.abs(a),min:(...a)=>{const arr=a.length===1&&Array.isArray(a[0])?a[0]:a;return Math.min(...arr)},max:(...a)=>{const arr=a.length===1&&Array.isArray(a[0])?a[0]:a;return Math.max(...arr)},sorted:a=>[...a].sort((x,y)=>x-y),reversed:a=>[...a].reverse(),round:(a,n)=>n!==undefined?parseFloat(a.toFixed(n)):Math.round(a),print:(...args)=>{output.push(args.map(a=>pyStr(a)).join(' '))},enumerate:a=>a.map((v,i)=>[i,v]),zip:(...arrs)=>{const m=Math.min(...arrs.map(a=>a.length));const r=[];for(let i=0;i<m;i++)r.push(arrs.map(a=>a[i]));return r},list:a=>Array.isArray(a)?[...a]:typeof a==='string'?a.split(''):a,bool:a=>!!a};
function pyStr(v){if(v===null||v===undefined)return'None';if(v===true)return'True';if(v===false)return'False';if(typeof v==='string')return v;if(Array.isArray(v))return'['+v.map(pyRepr).join(', ')+']';if(typeof v==='object'&&v.__class__){return`<${v.__class__} object>`}if(typeof v==='object')return'{'+Object.entries(v).map(([k,val])=>pyRepr(k)+': '+pyRepr(val)).join(', ')+'}';return String(v)}
function pyRepr(v){if(typeof v==='string')return"'"+v+"'";return pyStr(v)}
function indent(l){const m=l.match(/^(\s*)/);return m?m[1].length:0}
function evalExpr(expr,scope){expr=expr.trim();if(expr==='')return undefined;if(expr==='True')return true;if(expr==='False')return false;if(expr==='None')return null;if(expr==='pass')return undefined;let js=expr;
js=js.replace(/f(["'])(.*?)\1/g,(m,q,c)=>{const r=c.replace(/\{([^}]+)\}/g,(m,inner)=>{const ci=inner.indexOf(':');if(ci!==-1){const vp=inner.substring(0,ci).trim(),fp=inner.substring(ci+1).trim(),fm=fp.match(/^\.(\d+)f$/);if(fm)return'${('+vp+').toFixed('+fm[1]+')}';return'${'+vp+'}'}return'${'+inner+'}'});return'`'+r+'`'});
js=js.replace(/(\w+)\.items\(\)/g,'Object.entries($1)');js=js.replace(/(\w+)\.keys\(\)/g,'Object.keys($1)');js=js.replace(/(\w+)\.values\(\)/g,'Object.values($1)');js=js.replace(/(\w+)\.append\((.+?)\)/g,'$1.push($2)');js=js.replace(/(\w+)\.pop\(\)/g,'$1.pop()');js=js.replace(/(\w+)\.upper\(\)/g,'$1.toUpperCase()');js=js.replace(/(\w+)\.lower\(\)/g,'$1.toLowerCase()');js=js.replace(/(\w+)\.strip\(\)/g,'$1.trim()');js=js.replace(/(\w+)\.split\(\)/g,'$1.split(" ").filter(x=>x)');js=js.replace(/(\w+)\.split\((.+?)\)/g,'$1.split($2)');
js=js.replace(/(\w+)\.join\(\[(.+?)\]\)/g,'[$2].join($1)');
js=js.replace(/\bTrue\b/g,'true');js=js.replace(/\bFalse\b/g,'false');js=js.replace(/\bNone\b/g,'null');js=js.replace(/\band\b/g,'&&');js=js.replace(/\bor\b/g,'||');js=js.replace(/\bnot\b/g,'!');
// "in" operator for strings and dicts
js=js.replace(/(.+?)\s+in\s+"([^"]+)"/g,'"$2".includes($1)');
js=js.replace(/(.+?)\s+in\s+'([^']+)'/g,"'$2'.includes($1)");
// "x in dict" for dicts â€” handled by JS 'in' operator naturally
// Constructor calls: ClassName(args)
for(const cn in classes){const re=new RegExp('\\b'+cn+'\\(','g');js=js.replace(re,'__new_'+cn+'(');}
const sv={...builtins,...globals,...scope};for(const cn in classes){sv['__new_'+cn]=(...args)=>{const obj={__class__:cn};const cls=classes[cn];if(cls.__init__){const localScope={self:obj};cls.__init__.params.slice(1).forEach((p,i)=>{localScope[p]=args[i]});execFunc(cls.__init__.body,{...sv,...localScope},0,cls.__init__.indent+4,{returned:false,value:undefined});}return obj};}
const vn=Object.keys(sv);const vv=Object.values(sv);try{return new Function(...vn,'return ('+js+')').apply(null,vv)}catch(e){throw'SyntaxError: í‘œí˜„ì‹ ì˜¤ë¥˜ â€” '+expr}}
function parseAssign(line){let d=0,inS=false,sC='';for(let i=0;i<line.length;i++){const c=line[i];if(inS){if(c===sC&&line[i-1]!=='\\')inS=false;continue}if(c==='"'||c==="'"){inS=true;sC=c;continue}if('([{'.includes(c))d++;if(')]}'.includes(c))d--;if(d===0&&c==='='&&line[i-1]!=='!'&&line[i-1]!=='>'&&line[i-1]!=='<'&&line[i+1]!=='=')return{target:line.substring(0,i).trim(),value:line.substring(i+1).trim()}}return null}
function splitArgs(s){const a=[];let d=0,cur='',inS=false,sC='';for(let i=0;i<s.length;i++){const c=s[i];if(inS){cur+=c;if(c===sC&&s[i-1]!=='\\')inS=false;continue}if(c==='"'||c==="'"){inS=true;sC=c;cur+=c;continue}if('([{'.includes(c))d++;if(')]}'.includes(c))d--;if(c===','&&d===0){a.push(cur);cur='';continue}cur+=c}if(cur.trim())a.push(cur);return a}
function execBlock(lines,scope,si,bi){let i=si;while(i<lines.length){const raw=lines[i],tr=raw.trim(),ind=indent(raw);if(tr===''||tr.startsWith('#')){i++;continue}if(ind<bi)return i;
// class
const clsM=tr.match(/^class\s+(\w+)(?:\((\w+)\))?\s*:/);
if(clsM){const cn=clsM[1],parent=clsM[2];const bS=i+1;let bE=bS;while(bE<lines.length&&(lines[bE].trim()===''||indent(lines[bE])>ind))bE++;classes[cn]={methods:{},parent:parent||null};
// Parse methods inside class
let j=bS;while(j<bE){const mtr=lines[j].trim();const mInd=indent(lines[j]);const defM=mtr.match(/^def\s+(\w+)\s*\(([^)]*)\)\s*:/);if(defM){const mn=defM[1],mp=defM[2].split(',').map(p=>p.trim()).filter(p=>p);const mbS=j+1;let mbE=mbS;while(mbE<bE&&(lines[mbE].trim()===''||indent(lines[mbE])>mInd))mbE++;classes[cn][mn]={params:mp,body:lines.slice(mbS,mbE),indent:mInd};
// Register as callable method
if(mn!=='__init__'){const mName=mn;globals[cn+'.'+mName]=true;}
j=mbE;continue}j++}
// If has parent, inherit
if(parent&&classes[parent]){for(const k in classes[parent]){if(k!=='methods'&&k!=='parent'&&!classes[cn][k])classes[cn][k]=classes[parent][k]}}
// Handle method calls on instances
i=bE;continue}
const defM=tr.match(/^def\s+(\w+)\s*\(([^)]*)\)\s*:/);if(defM){const fn=defM[1],pm=defM[2].split(',').map(p=>p.trim()).filter(p=>p);const bS=i+1;let bE=bS;while(bE<lines.length&&(lines[bE].trim()===''||indent(lines[bE])>ind))bE++;const bodyLines=lines.slice(bS,bE);funcs[fn]=(...args)=>{const ls={...scope};pm.forEach((p,idx)=>{ls[p]=args[idx]});globals[fn]=funcs[fn];builtins[fn]=funcs[fn];const result={returned:false,value:undefined};execFunc(bodyLines,ls,0,ind+4,result);return result.value};globals[fn]=funcs[fn];builtins[fn]=funcs[fn];i=bE;continue}
const forM=tr.match(/^for\s+(.+?)\s+in\s+(.+?)\s*:/);if(forM){const vp=forM[1].trim(),ie=forM[2].trim(),iter=evalExpr(ie,scope);const bS=i+1;let bE=bS;while(bE<lines.length&&(lines[bE].trim()===''||indent(lines[bE])>ind))bE++;
for(const item of iter){if(vp.includes(',')){const vs=vp.split(',').map(v=>v.trim());if(Array.isArray(item))vs.forEach((v,idx)=>{scope[v]=item[idx];globals[v]=item[idx]})}else{scope[vp]=item;globals[vp]=item}execBlock(lines,scope,bS,ind+4)}i=bE;continue}
const whM=tr.match(/^while\s+(.+?)\s*:/);if(whM){const bS=i+1;let bE=bS;while(bE<lines.length&&(lines[bE].trim()===''||indent(lines[bE])>ind))bE++;let sf=0;while(evalExpr(whM[1],scope)&&sf<50000){execBlock(lines,scope,bS,ind+4);sf++}i=bE;continue}
const ifM=tr.match(/^if\s+(.+?)\s*:/);if(ifM){const r=handleIf(lines,i,scope,ind);i=r;continue}
const prM=tr.match(/^print\s*\((.*)\)$/s);if(prM!==null){const as=prM[1]!==undefined?prM[1].trim():'';if(as==='')output.push('');else{const args=splitArgs(as);output.push(args.map(a=>pyStr(evalExpr(a.trim(),scope))).join(' '))}i++;continue}
// Method call on object: obj.method(args)
const methCall=tr.match(/^(\w+)\.(\w+)\(([^)]*)\)$/);
if(methCall){const objName=methCall[1],methName=methCall[2],argsStr=methCall[3];const obj=scope[objName]||globals[objName];if(obj&&typeof obj==='object'&&obj.__class__){const cls=classes[obj.__class__];if(cls&&cls[methName]){const mp=cls[methName].params;const args=argsStr?splitArgs(argsStr).map(a=>evalExpr(a.trim(),scope)):[];const ls={self:obj,...scope};mp.slice(1).forEach((p,idx)=>{ls[p]=args[idx]});const result={returned:false,value:undefined};execFunc(cls[methName].body,ls,0,cls[methName].indent+4,result);i++;continue}}
if(obj&&Array.isArray(obj)){if(methName==='append'){obj.push(evalExpr(argsStr,scope));i++;continue}if(methName==='pop'){obj.pop();i++;continue}}i++;continue}
const assign=parseAssign(tr);if(assign){const val=evalExpr(assign.value,scope);if(assign.target.includes(',')){const ts=assign.target.split(',').map(t=>t.trim());if(Array.isArray(val))ts.forEach((t,idx)=>{scope[t]=val[idx];globals[t]=val[idx]})}else{const idxM=assign.target.match(/^(\w+)\[(.+)\]$/);if(idxM){const arr=scope[idxM[1]]||globals[idxM[1]];arr[evalExpr(idxM[2],scope)]=val}else{
// Check if setting attribute: obj.attr = val
const dotM=assign.target.match(/^(\w+)\.(\w+)$/);if(dotM){const obj=scope[dotM[1]]||globals[dotM[1]];if(obj)obj[dotM[2]]=val}else{scope[assign.target]=val;globals[assign.target]=val}}}i++;continue}
try{evalExpr(tr,scope)}catch(e){}i++}return i}
function execFunc(lines,scope,si,bi,result){let i=si;while(i<lines.length){const raw=lines[i],tr=raw.trim(),ind=indent(raw);if(tr===''||tr.startsWith('#')){i++;continue}if(ind<bi&&tr!=='')return i;
const retM=tr.match(/^return\s*(.*)/);if(retM){result.value=retM[1].trim()?evalExpr(retM[1].trim(),scope):null;result.returned=true;return i}
const forM=tr.match(/^for\s+(.+?)\s+in\s+(.+?)\s*:/);if(forM){const vp=forM[1].trim(),iter=evalExpr(forM[2].trim(),scope);const bS=i+1;let bE=bS;while(bE<lines.length&&(lines[bE].trim()===''||indent(lines[bE])>ind))bE++;for(const item of iter){if(vp.includes(',')){const vs=vp.split(',').map(v=>v.trim());if(Array.isArray(item))vs.forEach((v,idx)=>{scope[v]=item[idx]})}else{scope[vp]=item}execFunc(lines,scope,bS,ind+4,result);if(result.returned)return i}i=bE;continue}
const whM=tr.match(/^while\s+(.+?)\s*:/);if(whM){const bS=i+1;let bE=bS;while(bE<lines.length&&(lines[bE].trim()===''||indent(lines[bE])>ind))bE++;let sf=0;while(evalExpr(whM[1],scope)&&sf<50000){execFunc(lines,scope,bS,ind+4,result);if(result.returned)return i;sf++}i=bE;continue}
const ifM=tr.match(/^if\s+(.+?)\s*:/);if(ifM){const r=handleIfFunc(lines,i,scope,ind,result);if(result.returned)return i;i=r;continue}
const prM=tr.match(/^print\s*\((.*)\)$/s);if(prM!==null){const as=prM[1]!==undefined?prM[1].trim():'';if(as==='')output.push('');else output.push(splitArgs(as).map(a=>pyStr(evalExpr(a.trim(),scope))).join(' '));i++;continue}
// Method call inside function
const methCall=tr.match(/^(\w+)\.(\w+)\(([^)]*)\)$/);
if(methCall){const objName=methCall[1],methName=methCall[2],argsStr=methCall[3];const obj=scope[objName]||globals[objName];if(obj&&typeof obj==='object'&&obj.__class__){const cls=classes[obj.__class__];if(cls&&cls[methName]){const mp=cls[methName].params;const args=argsStr?splitArgs(argsStr).map(a=>evalExpr(a.trim(),scope)):[];const ls={self:obj,...scope};mp.slice(1).forEach((p,idx)=>{ls[p]=args[idx]});const r2={returned:false,value:undefined};execFunc(cls[methName].body,ls,0,cls[methName].indent+4,r2);i++;continue}}
if(obj&&Array.isArray(obj)&&methName==='append'){obj.push(evalExpr(argsStr,scope));i++;continue}i++;continue}
const assign=parseAssign(tr);if(assign){const val=evalExpr(assign.value,scope);if(assign.target.includes(',')){const ts=assign.target.split(',').map(t=>t.trim());if(Array.isArray(val))ts.forEach((t,idx)=>{scope[t]=val[idx]})}else{const idxM=assign.target.match(/^(\w+)\[(.+)\]$/);if(idxM){const arr=scope[idxM[1]]||globals[idxM[1]];arr[evalExpr(idxM[2],scope)]=val}else{const dotM=assign.target.match(/^(\w+)\.(\w+)$/);if(dotM){const obj=scope[dotM[1]];if(obj)obj[dotM[2]]=val}else scope[assign.target]=val}}i++;continue}
try{evalExpr(tr,scope)}catch(e){}i++}return i}
function handleIf(lines,si,scope,bi){let i=si;const cond=evalExpr(lines[i].trim().match(/^if\s+(.+?)\s*:/)[1],scope);const bS=i+1;let bE=bS;while(bE<lines.length&&(lines[bE].trim()===''||indent(lines[bE])>bi))bE++;let exec=false;if(cond){execBlock(lines,scope,bS,bi+4);exec=true}i=bE;
while(i<lines.length){const t=lines[i].trim(),ind=indent(lines[i]);if(ind!==bi)break;const em=t.match(/^elif\s+(.+?)\s*:/);if(em){const eS=i+1;let eE=eS;while(eE<lines.length&&(lines[eE].trim()===''||indent(lines[eE])>bi))eE++;if(!exec&&evalExpr(em[1],scope)){execBlock(lines,scope,eS,bi+4);exec=true}i=eE;continue}const el=t.match(/^else\s*:/);if(el){const eS=i+1;let eE=eS;while(eE<lines.length&&(lines[eE].trim()===''||indent(lines[eE])>bi))eE++;if(!exec)execBlock(lines,scope,eS,bi+4);i=eE;continue}break}return i}
function handleIfFunc(lines,si,scope,bi,result){let i=si;const cond=evalExpr(lines[i].trim().match(/^if\s+(.+?)\s*:/)[1],scope);const bS=i+1;let bE=bS;while(bE<lines.length&&(lines[bE].trim()===''||indent(lines[bE])>bi))bE++;let exec=false;if(cond){execFunc(lines,scope,bS,bi+4,result);exec=true}i=bE;
while(i<lines.length){const t=lines[i].trim(),ind=indent(lines[i]);if(ind!==bi)break;const em=t.match(/^elif\s+(.+?)\s*:/);if(em){const eS=i+1;let eE=eS;while(eE<lines.length&&(lines[eE].trim()===''||indent(lines[eE])>bi))eE++;if(!exec&&evalExpr(em[1],scope)){execFunc(lines,scope,eS,bi+4,result);exec=true}i=eE;continue}const el=t.match(/^else\s*:/);if(el){const eS=i+1;let eE=eS;while(eE<lines.length&&(lines[eE].trim()===''||indent(lines[eE])>bi))eE++;if(!exec)execFunc(lines,scope,eS,bi+4,result);i=eE;continue}break}return i}
try{execBlock(src.split('\n'),{},0,0);return{success:true,output:output.join('\n')||'(ì¶œë ¥ ì—†ìŒ â€” print()ë¥¼ ì‚¬ìš©í•´ë³´ì„¸ìš”)',error:''}}catch(e){const em=typeof e==='string'?e:(e.message||String(e));let ce=em;if(em.includes('is not defined'))ce='NameError: '+em;else if(em.includes('is not a function'))ce='TypeError: '+em;else if(em.includes('Unexpected'))ce='SyntaxError: ë¬¸ë²• ì˜¤ë¥˜ì…ë‹ˆë‹¤. ë“¤ì—¬ì“°ê¸°ì™€ ì½œë¡ (:)ì„ í™•ì¸í•˜ì„¸ìš”.';return{success:false,output:output.join('\n'),error:ce}}}

function executeCode(){const t=performance.now();const r=miniPython(code);r.time=performance.now()-t;lastRunResult=r;renderOutput()}
function renderOutput(){const a=document.getElementById('outputArea');if(!a||!lastRunResult)return;const r=lastRunResult,t=r.time?(r.time<1?'<1':Math.round(r.time))+'ms':'';if(r.success)a.innerHTML=`<div class="output-wrap"><div class="output-header success"><span><span class="status-dot"></span>âœ… ì‹¤í–‰ ì„±ê³µ</span><span class="output-time">${t}</span></div><div class="output-body success-text">${escH(r.output)}</div></div>`;else{let b='';if(r.output)b+=escH(r.output)+'\n\n';b+=escH(r.error);a.innerHTML=`<div class="output-wrap"><div class="output-header error"><span><span class="status-dot"></span>âŒ ì˜¤ë¥˜ ë°œìƒ</span><span class="output-time">${t}</span></div><div class="output-body error-text">${b}</div></div>`}}

// ==================== RENDER ====================
function escH(s){return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;')}
function getStages(){return COURSES[currentCourse].stages}
function getS(){return getStages()[currentStage]}
function getCourseKey(){return currentCourse+'-'+currentStage}

function renderCourseSelect(){
  const mc=document.getElementById('mainContent');
  mc.innerHTML=`
  <div class="course-select">
    <h2>ğŸ¯ ì½”ìŠ¤ë¥¼ ì„ íƒí•˜ì„¸ìš”</h2>
    <p>ìì‹ ì˜ ìˆ˜ì¤€ì— ë§ëŠ” ì½”ìŠ¤ë¥¼ ê³¨ë¼ ì‹œì‘í•˜ì„¸ìš”</p>
    <div class="course-cards">
      ${Object.entries(COURSES).map(([key,c])=>`
        <div class="course-card card-${c.color}" onclick="selectCourse('${key}')">
          <span class="emoji">${c.emoji}</span>
          <h3>${c.name}</h3>
          <div class="level-desc">${c.desc}</div>
          <div class="topics">${c.topics.map(t=>`<span class="topic-tag">${t}</span>`).join('')}</div>
          <div class="start-label">ì‹œì‘í•˜ê¸° â†’</div>
        </div>
      `).join('')}
    </div>
  </div>`;
}

function renderPractice(){
  const mc=document.getElementById('mainContent');
  const c=COURSES[currentCourse];const stages=getStages();const s=getS();
  const progPct=(completedStages.size/stages.length*100);
  const colorMap={beginner:'#2ea043',intermediate:'#e8a317',advanced:'#e05555'};
  const progColor=colorMap[c.color]||'#3776AB';

  let tabs=stages.map((st,i)=>`<button class="stage-tab tab-${c.color}${i===currentStage?' active':''}${completedStages.has(getCK(i))?' done':''}" onclick="goTo(${i})">${completedStages.has(getCK(i))?'âœ“ ':''}${st.id}ë‹¨ê³„</button>`).join('');
  let hints=s.hints.map((h,i)=>{const isA=i===s.hints.length-1;return`<button class="accordion-btn ${isA?'hint-btn answer-btn':'hint-btn'}" onclick="togH(${i})"><span>${h.label}</span><span class="arrow ${openHints[i]?'open':''}">â–¾</span></button><div class="accordion-content ${openHints[i]?'open':''}"><div class="hint-content"><pre>${escH(h.detail)}</pre></div></div>`}).join('');
  const isDone=completedStages.has(getCourseKey());
  const lines=code.split('\n');

  mc.innerHTML=`
  <div class="course-badge badge-${c.color}" onclick="backToCourse()" title="ì½”ìŠ¤ ì„ íƒìœ¼ë¡œ ëŒì•„ê°€ê¸°">â† ${c.emoji} ${c.name} ì½”ìŠ¤</div>
  <div class="progress-bar"><div class="progress-fill" style="width:${progPct}%;background:linear-gradient(90deg,${progColor},${progColor}88)"></div></div>
  <div class="stage-tabs">${tabs}</div>
  <div class="main-grid">
    <div>
      <div class="card"><div class="stage-header"><span class="stage-label label-${c.color}">STAGE ${s.id}</span><span class="stage-difficulty">${s.difficulty}</span></div><div class="stage-title">${s.title}</div><div class="stage-desc">${s.description}</div><div class="task-box"><div class="task-label">ğŸ“‹ ë¬¸ì œ</div><div class="task-text">${escH(s.task)}</div></div></div>
      <button class="accordion-btn concept-btn" onclick="togC()"><span>ğŸ“š í•µì‹¬ ê°œë…</span><span class="arrow ${showConcepts?'open':''}">â–¾</span></button><div class="accordion-content ${showConcepts?'open':''}"><div class="concept-content"><div class="concept-list">${s.concepts.map(c=>typeof c==='string'?`<div class="concept-item"><div class="concept-item-header"><span class="concept-item-name">${escH(c)}</span></div></div>`:`<div class="concept-item"><div class="concept-item-header"><span class="concept-item-name">${escH(c.name)}</span></div><div class="concept-item-desc">${escH(c.desc)}</div><div class="concept-item-example">${escH(c.example)}</div></div>`).join('')}</div></div></div>
      ${hints}
    </div>
    <div>
      <div class="editor-wrap"><div class="editor-header"><div class="traffic-lights"><span class="dot dot-red"></span><span class="dot dot-yellow"></span><span class="dot dot-green"></span><span class="filename">stage${s.id}.py</span></div><button class="reset-btn" onclick="rstCode()">â†º ì´ˆê¸°í™”</button></div><div class="editor-body"><div class="line-numbers" id="lineNumbers">${lines.map((_,i)=>`<div>${i+1}</div>`).join('')}</div><textarea class="code-textarea" id="codeArea" spellcheck="false" oninput="onIn(this)" onkeydown="onK(event)">${escH(code)}</textarea></div><div class="editor-footer"><span>${lines.length} lines</span><span>Python 3</span></div></div>
      <button class="btn-run" onclick="executeCode()">â–¶ ì‹¤í–‰í•˜ê¸°</button>
      <div id="outputArea"></div>
      <div class="actions"><button class="btn-ask" onclick="togChat()">ğŸ’¬ ì§ˆë¬¸í•˜ê¸°</button><button class="btn-complete ${isDone?'done':''}" onclick="markDone()" title="ì™„ë£Œ í‘œì‹œ">${isDone?'âœ“':'â˜'}</button></div>
      <div id="chatPanel"></div>
      <div class="nav-btns"><button class="nav-btn" ${currentStage===0?'disabled':''} onclick="goTo(${currentStage-1})">â† ì´ì „</button><button class="nav-btn" ${currentStage===stages.length-1?'disabled':''} onclick="goTo(${currentStage+1})">ë‹¤ìŒ â†’</button></div>
    </div>
  </div>`;
  if(lastRunResult)renderOutput();
  if(showChat)renderChatPanel();
}

function render(){if(!currentCourse)renderCourseSelect();else renderPractice()}

// Helpers
function getCK(i){return currentCourse+'-'+i}
function selectCourse(key){currentCourse=key;currentStage=0;code=COURSES[key].stages[0].starterCode;completedStages=new Set();savedCodes={};openHints={};showConcepts=false;showAnswer=false;lastRunResult=null;
// Load saved progress for this course
try{const r=localStorage.getItem('pyD5_'+key);if(r){const d=JSON.parse(r);if(d.s!==undefined)currentStage=d.s;if(d.c)d.c.forEach(i=>completedStages.add(i));if(d.codes)savedCodes=d.codes;code=savedCodes[getCourseKey()]||COURSES[key].stages[currentStage].starterCode;}}catch(e){}
render();saveP()}
function backToCourse(){currentCourse=null;render()}
function goTo(i){if(i<0||i>=getStages().length)return;savedCodes[getCourseKey()]=code;currentStage=i;code=savedCodes[getCK(i)]||getStages()[i].starterCode;openHints={};showConcepts=false;showAnswer=false;showChat=false;lastRunResult=null;render();saveCourse();window.scrollTo({top:0,behavior:'smooth'})}
function togH(i){openHints[i]=!openHints[i];render()}
function togC(){showConcepts=!showConcepts;render()}
function togA(){showAnswer=!showAnswer;render()}
function rstCode(){code=getS().starterCode;savedCodes[getCourseKey()]=code;lastRunResult=null;render();saveCourse()}
function cpAns(){code=getS().sampleAnswer;savedCodes[getCourseKey()]=code;render();saveCourse()}
function markDone(){completedStages.add(getCourseKey());savedCodes[getCourseKey()]=code;render();saveCourse();const c=document.getElementById('celebration');c.style.display='flex';setTimeout(()=>c.style.display='none',1800)}
function onIn(el){code=el.value;savedCodes[getCourseKey()]=code;document.getElementById('lineNumbers').innerHTML=code.split('\n').map((_,i)=>`<div>${i+1}</div>`).join('');saveCourse()}
function onK(e){if(e.key==='Tab'){e.preventDefault();const t=e.target,s=t.selectionStart,end=t.selectionEnd;code=t.value.substring(0,s)+'    '+t.value.substring(end);t.value=code;t.selectionStart=t.selectionEnd=s+4;savedCodes[getCourseKey()]=code;document.getElementById('lineNumbers').innerHTML=code.split('\n').map((_,i)=>`<div>${i+1}</div>`).join('');saveCourse()}}
function saveCourse(){if(!currentCourse)return;try{localStorage.setItem('pyD5_'+currentCourse,JSON.stringify({s:currentStage,c:[...completedStages],codes:savedCodes}))}catch(e){}}

// ==================== AI CHAT TUTOR ====================
let showChat = false;
let chatMessages = {}; // per stage

function getChatKey() { return currentCourse + '-' + currentStage + '-chat'; }

function togChat() {
  showChat = !showChat;
  renderChatPanel();
}

function renderChatPanel() {
  const el = document.getElementById('chatPanel');
  if (!el) return;
  if (!showChat) { el.innerHTML = ''; return; }

  const key = getChatKey();
  const msgs = chatMessages[key] || [];
  const msgsHtml = msgs.map(m =>
    `<div class="chat-msg ${m.role}">${m.role === 'ai' ? formatAiMsg(m.text) : escH(m.text)}</div>`
  ).join('');

  el.innerHTML = `
    <div class="chat-panel">
      <div class="chat-header">
        <span>ğŸ¤– AI íŠœí„°ì—ê²Œ ì§ˆë¬¸í•˜ê¸°</span>
        <button class="chat-close" onclick="togChat()">âœ•</button>
      </div>
      <div class="chat-messages" id="chatMessages">
        ${msgs.length === 0 ? '<div class="chat-msg ai">ì•ˆë…•í•˜ì„¸ìš”! ì´ ë¬¸ì œì— ëŒ€í•´ ê¶ê¸ˆí•œ ì ì´ ìˆìœ¼ë©´ í¸í•˜ê²Œ ì§ˆë¬¸í•˜ì„¸ìš”. ğŸ˜Š\n\nì˜ˆì‹œ:\nâ€¢ "f-stringì´ ë­ì˜ˆìš”?"\nâ€¢ "ì™œ ì˜¤ë¥˜ê°€ ë‚˜ìš”?"\nâ€¢ "for ë¬¸ì„ ì–´ë–»ê²Œ ì¨ìš”?"</div>' : msgsHtml}
      </div>
      <div class="chat-input-wrap">
        <textarea class="chat-input" id="chatInput" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”..." rows="1" onkeydown="chatKeyDown(event)"></textarea>
        <button class="chat-send" id="chatSendBtn" onclick="sendChat()">ì „ì†¡</button>
      </div>
    </div>`;

  // Scroll to bottom
  const msgBox = document.getElementById('chatMessages');
  if (msgBox) msgBox.scrollTop = msgBox.scrollHeight;
}

function formatAiMsg(text) {
  // Simple formatting: wrap `code` in <code> tags
  return escH(text).replace(/`([^`]+)`/g, '<code>$1</code>');
}

function chatKeyDown(e) {
  if (e.key === 'Enter' && !e.shiftKey) {
    e.preventDefault();
    sendChat();
  }
}

async function sendChat() {
  const input = document.getElementById('chatInput');
  if (!input) return;
  const question = input.value.trim();
  if (!question) return;

  const key = getChatKey();
  if (!chatMessages[key]) chatMessages[key] = [];

  // Add user message
  chatMessages[key].push({ role: 'user', text: question });
  
  // Show thinking indicator
  chatMessages[key].push({ role: 'ai', text: 'ìƒê°í•˜ëŠ” ì¤‘...' });
  renderChatPanel();

  // Disable send
  const btn = document.getElementById('chatSendBtn');
  if (btn) btn.disabled = true;

  try {
    const s = getS();
    const c = COURSES[currentCourse];
    
    // Build context about current problem
    const systemPrompt = `ë‹¹ì‹ ì€ ì¹œì ˆí•œ íŒŒì´ì¬ í”„ë¡œê·¸ë˜ë° íŠœí„°ì…ë‹ˆë‹¤. ì´ˆë³´ìê°€ ì´í•´í•˜ê¸° ì‰½ê²Œ í•œêµ­ì–´ë¡œ ë‹µë³€í•˜ì„¸ìš”.

í˜„ì¬ í•™ìƒì´ í’€ê³  ìˆëŠ” ë¬¸ì œ:
- ì½”ìŠ¤: ${c.name}
- ë‹¨ê³„: ${s.id}ë‹¨ê³„ - ${s.title}
- ë¬¸ì œ: ${s.task}
- í•µì‹¬ ê°œë…: ${s.concepts.join(', ')}

í•™ìƒì´ í˜„ì¬ ì‘ì„±í•œ ì½”ë“œ:
\`\`\`python
${code}
\`\`\`

${lastRunResult ? (lastRunResult.success ? 'ì‹¤í–‰ ê²°ê³¼: ì„±ê³µ\nì¶œë ¥: ' + lastRunResult.output : 'ì‹¤í–‰ ê²°ê³¼: ì˜¤ë¥˜\nì—ëŸ¬: ' + lastRunResult.error) : 'ì•„ì§ ì‹¤í–‰í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.'}

ê·œì¹™:
1. ì •ë‹µì„ ë°”ë¡œ ì•Œë ¤ì£¼ì§€ ë§ê³ , íŒíŠ¸ì™€ ì„¤ëª…ìœ¼ë¡œ ìŠ¤ìŠ¤ë¡œ í’€ ìˆ˜ ìˆê²Œ ë„ì™€ì£¼ì„¸ìš”.
2. í•™ìƒì´ ì •ë‹µì„ ì§ì ‘ ìš”êµ¬í•˜ë©´ ë‹¨ê³„ì ìœ¼ë¡œ ì•ˆë‚´í•˜ì„¸ìš”.
3. ì½”ë“œ ì˜ˆì‹œë¥¼ ì¤„ ë•ŒëŠ” í˜„ì¬ ë¬¸ì œì™€ ë‹¤ë¥¸ ê°„ë‹¨í•œ ì˜ˆì‹œë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.
4. ì§§ê³  ëª…í™•í•˜ê²Œ ë‹µë³€í•˜ì„¸ìš” (3~5ë¬¸ì¥).
5. ê²©ë ¤ì™€ ì‘ì›ì„ í¬í•¨í•˜ì„¸ìš”.`;

    const response = await fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        model: 'claude-sonnet-4-20250514',
        max_tokens: 1000,
        system: systemPrompt,
        messages: buildChatHistory(key, question)
      })
    });

    const data = await response.json();
    const aiText = data.content && data.content[0] ? data.content[0].text : 'ì£„ì†¡í•©ë‹ˆë‹¤, ì‘ë‹µì„ ë°›ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';

    // Replace thinking indicator with actual response
    chatMessages[key][chatMessages[key].length - 1] = { role: 'ai', text: aiText };
  } catch (e) {
    // If API fails, provide offline help based on hints
    const s = getS();
    let offlineAnswer = getOfflineHelp(question, s);
    chatMessages[key][chatMessages[key].length - 1] = { role: 'ai', text: offlineAnswer };
  }

  renderChatPanel();
  if (btn) btn.disabled = false;
}

function buildChatHistory(key, currentQuestion) {
  const msgs = chatMessages[key] || [];
  const history = [];
  // Include last few exchanges for context (skip the thinking indicator)
  const relevant = msgs.filter(m => m.text !== 'ìƒê°í•˜ëŠ” ì¤‘...').slice(-8);
  for (const m of relevant) {
    if (m.role === 'user') history.push({ role: 'user', content: m.text });
    else if (m.role === 'ai') history.push({ role: 'assistant', content: m.text });
  }
  // Make sure last message is user
  if (history.length === 0 || history[history.length - 1].role !== 'user') {
    history.push({ role: 'user', content: currentQuestion });
  }
  return history;
}

function getOfflineHelp(question, stage) {
  const q = question.toLowerCase();
  
  // Check for common questions and provide relevant hints
  if (q.includes('ì˜¤ë¥˜') || q.includes('ì—ëŸ¬') || q.includes('ì•ˆë¼') || q.includes('ì•ˆ ë¼')) {
    if (lastRunResult && !lastRunResult.success) {
      return `ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ ì‚´í´ë³¼ê²Œìš”:\n\n\`${lastRunResult.error}\`\n\nì´ ì˜¤ë¥˜ëŠ” ì½”ë“œì— ë¬¸ë²•ì ì¸ ë¬¸ì œê°€ ìˆë‹¤ëŠ” ëœ»ì´ì—ìš”. ë“¤ì—¬ì“°ê¸°(ìŠ¤í˜ì´ìŠ¤ 4ì¹¸)ì™€ ì½œë¡ (:)ì„ í™•ì¸í•´ë³´ì„¸ìš”!\n\níŒíŠ¸ ë²„íŠ¼ì„ í•˜ë‚˜ì”© ì—´ì–´ë³´ë©´ ë„ì›€ì´ ë  ê±°ì˜ˆìš”. ğŸ’ª`;
    }
    return 'ë¨¼ì € â–¶ ì‹¤í–‰í•˜ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ì„œ ì–´ë–¤ ì˜¤ë¥˜ê°€ ë‚˜ëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”. ì˜¤ë¥˜ ë©”ì‹œì§€ê°€ ë¬¸ì œ í•´ê²°ì˜ ë‹¨ì„œê°€ ë©ë‹ˆë‹¤!';
  }

  if (q.includes('ëª¨ë¥´') || q.includes('ì–´ë ¤') || q.includes('ì´í•´') || q.includes('ì„¤ëª…')) {
    return `ì´ ë¬¸ì œì˜ í•µì‹¬ ê°œë…ì€ ${stage.concepts.join(', ')} ì´ì—ìš”.\n\nì™¼ìª½ì˜ ğŸ“š í•µì‹¬ ê°œë… ë²„íŠ¼ê³¼ íŒíŠ¸ ë²„íŠ¼ì„ ìˆœì„œëŒ€ë¡œ ì—´ì–´ë³´ì„¸ìš”. ë‹¨ê³„ë³„ë¡œ í’€ì–´ë‚˜ê°ˆ ìˆ˜ ìˆì–´ìš”!\n\nì²˜ìŒì´ë¼ ì–´ë ¤ìš´ ê²Œ ë‹¹ì—°í•´ìš”. ì²œì²œíˆ í•´ë´ìš”! ğŸ˜Š`;
  }

  if (q.includes('print') || q.includes('ì¶œë ¥')) {
    return '`print()` í•¨ìˆ˜ëŠ” ê´„í˜¸ ì•ˆì˜ ê°’ì„ í™”ë©´ì— ì¶œë ¥í•´ìš”.\n\nì˜ˆì‹œ:\n`print("ì•ˆë…•")` â†’ ì•ˆë…•\n`print(1 + 2)` â†’ 3\n`print(f"ê°’: {ë³€ìˆ˜}")` â†’ ê°’: (ë³€ìˆ˜ë‚´ìš©)\n\nf-stringì„ ì“°ë©´ ë³€ìˆ˜ë¥¼ {} ì•ˆì— ë„£ì„ ìˆ˜ ìˆì–´ìš”!';
  }

  if (q.includes('for') || q.includes('ë°˜ë³µ')) {
    return '`for` ë°˜ë³µë¬¸ì€ ë¦¬ìŠ¤íŠ¸ë‚˜ ë²”ìœ„ì˜ ê°’ì„ í•˜ë‚˜ì”© êº¼ë‚´ìš”.\n\nì˜ˆì‹œ:\n`for i in range(5):` â†’ 0,1,2,3,4 ë°˜ë³µ\n`for i in range(1, 6):` â†’ 1,2,3,4,5 ë°˜ë³µ\n\nê¼­ ì½œë¡ (:)ê³¼ ë“¤ì—¬ì“°ê¸°ë¥¼ ìŠì§€ ë§ˆì„¸ìš”!';
  }

  if (q.includes('if') || q.includes('ì¡°ê±´')) {
    return '`if` ì¡°ê±´ë¬¸ì€ ì¡°ê±´ì´ ì°¸ì¼ ë•Œë§Œ ì‹¤í–‰ë¼ìš”.\n\nì˜ˆì‹œ:\n`if x > 10:`\n`    print("í¬ë‹¤")`\n`elif x > 5:`\n`    print("ì¤‘ê°„")`\n`else:`\n`    print("ì‘ë‹¤")`\n\nì¡°ê±´ ë’¤ì— ì½œë¡ (:)ì„ ë¶™ì´ê³ , ì‹¤í–‰ë¬¸ì€ ë“¤ì—¬ì“°ê¸° í•˜ì„¸ìš”!';
  }

  if (q.includes('í•¨ìˆ˜') || q.includes('def') || q.includes('return')) {
    return 'í•¨ìˆ˜ëŠ” `def`ë¡œ ë§Œë“¤ê³  `return`ìœ¼ë¡œ ê°’ì„ ëŒë ¤ì¤˜ìš”.\n\nì˜ˆì‹œ:\n`def add(a, b):`\n`    return a + b`\n\n`result = add(3, 5)`  â†’ resultëŠ” 8\n\ní•¨ìˆ˜ë¥¼ ë§Œë“  í›„ í˜¸ì¶œí•´ì•¼ ì‹¤í–‰ë¼ìš”!';
  }

  if (q.includes('ë”•ì…”ë„ˆë¦¬') || q.includes('dict') || q.includes('items')) {
    return 'ë”•ì…”ë„ˆë¦¬ëŠ” {í‚¤: ê°’} ìŒìœ¼ë¡œ ë°ì´í„°ë¥¼ ì €ì¥í•´ìš”.\n\nì˜ˆì‹œ:\n`d = {"ì´ë¦„": "ì² ìˆ˜", "ë‚˜ì´": 20}`\n`d["ì´ë¦„"]` â†’ "ì² ìˆ˜"\n\n`.items()`ë¡œ í‚¤ì™€ ê°’ì„ ë™ì‹œì— ìˆœíšŒí•  ìˆ˜ ìˆì–´ìš”:\n`for key, val in d.items():`';
  }

  // Default helpful response
  return `ì¢‹ì€ ì§ˆë¬¸ì´ì—ìš”! ğŸ‘\n\nì´ ë¬¸ì œì—ì„œëŠ” ${stage.concepts.join(', ')}ì„(ë¥¼) í™œìš©í•´ì•¼ í•´ìš”.\n\nì™¼ìª½ì˜ íŒíŠ¸ë¥¼ ìˆœì„œëŒ€ë¡œ í™•ì¸í•´ë³´ì‹œê³ , ì½”ë“œë¥¼ ì¡°ê¸ˆì”© ìˆ˜ì •í•˜ë©´ì„œ â–¶ ì‹¤í–‰í•˜ê¸°ë¡œ í…ŒìŠ¤íŠ¸í•´ë³´ì„¸ìš”.\n\nêµ¬ì²´ì ìœ¼ë¡œ ì–´ë–¤ ë¶€ë¶„ì´ í—·ê°ˆë¦¬ëŠ”ì§€ ì•Œë ¤ì£¼ì‹œë©´ ë” ìì„¸íˆ ë„ì™€ë“œë¦´ê²Œìš”!`;
}

render();
</script>
</body>
</html>
